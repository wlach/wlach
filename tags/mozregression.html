<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8" />
    <title>Posts tagged 'mozregression'</title>
    <meta name="description" content="Posts tagged 'mozregression'" />
    <meta name="author" content="William Lachance" />
    <meta name="keywords" content="mozregression" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="canonical" href="https://wrla.ch/tags/mozregression.html" />

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/css/pygments.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/css/scribble.css"
    />
    <!-- Feeds -->
    <link
      rel="alternate"
      type="application/atom+xml"
      href="/feeds/mozregression.atom.xml"
      title="Atom Feed"
    />
    <link
      rel="alternate"
      type="application/rss+xml"
      href="/feeds/mozregression.rss.xml"
      title="RSS Feed"
    />
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-xxxxx', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <nav
      class="flex items-center justify-between flex-wrap bg-gray-800 py-1 px-8"
    >
      <div class="flex items-center flex-shrink-0 text-gray-400 mr-6">
        <div class="p-1">
          <a href="/index.html"
            ><img
              src="/img/wlach_icon.png"
              width="32"
              height="32"
              class="p rounded"
          /></a>
        </div>
        <div class="p-1">
          <a
            href="/index.html"
            class="text-gray-200 font-semibold text-xl tracking-tight hover:text-white"
            >wlach log</a
          >
        </div>
      </div>
      <div class="flex-grow lg:flex lg:items-center">
        <div class="text-sm lg:flex-grow">
          <a
            href="/About.html"
            class="mt-4 lg:inline-block lg:mt-0 hover:text-white mr-4 text-gray-600"
          >
            About</a>
          <a
            class="mt-4 lg:inline-block lg:mt-0 text-gray-600 hover:text-white mr-4"
            href="/feeds/mozregression.atom.xml"
            >Atom</a
          >
          <a
            class="mt-4 lg:inline-block lg:mt-0 text-gray-600 hover:text-white mr-4"
            href="/feeds/mozregression.rss.xml"
            >RSS</a
          >
        </div>
      </div>
    </nav>
    <div id="content" class="container max-w-screen-md px-8 py-4 mx-auto">
       <p class="less-important">Showing posts tagged <em>mozregression</em></p>  <article>
  <header>
    <h2><a href="/blog/2021/05/mozregression-update-may-2021/">mozregression update May 2021</a></h2>
    <p class="index-date">May 10th, 2021</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/Glean.html">Glean</a>  <a href="/tags/Telemetry.html">Telemetry</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p>Just wanted to give some quick updates on the state of <a href="https://mozilla.github.io/mozregression">mozregression</a>.</p>

<h2 id="anti-virus-false-positives">Anti-virus false positives</h2>

<p>One of the persistent issues with mozregression is that it seems to be <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1647533">persistently detected as a virus by many popular anti-virus scanners</a>. The causes for this are somewhat complex, but at root the problem is that mozregression requires fairly broad permissions to do the things it needs to do (install and run copies of Firefox) and thus its behavior is hard to distinguish from a piece of software doing something malicious.</p>

<p>Recently there have been a number of mitigations which seem to be improving this situation:</p>

<ul>
 <li>:bryce has been submitting copies of mozregression to Microsoft so that Windows Defender (probably the most popular anti-virus software on this platform) doesn&rsquo;t flag it.</li>
 <li>I recently <a href="https://github.com/mozilla/mozregression/releases">released mozregression 4.0.17</a>, which upgrades the GUI dependency for pyinstaller to a later version which sets PE checksums correctly on the generated executable (<a href="https://github.com/pyinstaller/pyinstaller/issues/5579">pyinstaller/pyinstaller#5579</a>).</li></ul>

<p>It&rsquo;s tempting to lament the fact that this is happening, but in a way I can understand it&rsquo;s hard to reliably detect what kind of software is legitimate and what isn&rsquo;t. I take the responsibility for distributing this kind of software seriously, and have pretty strict limits on who has access to the mozregression GitHub repository and what pull requests I&rsquo;ll merge.</p>

<h2 id="ci-ported-to-github-actions">CI ported to GitHub Actions</h2>

<p>Due to changes in Travis&rsquo;s policies, we needed to migrate continuous integration for mozregression to GitHub actions. You can see the gory details in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1686039">bug 1686039</a>. One possibly interesting wrinkle to others: due to Mozilla&rsquo;s security policy, we can&rsquo;t use (most) external actions inside our GitHub repository. I thus rewrote the logic for uploading a mozregression release to GitHub for MacOS and Linux GUI builds (Windows builds are still happening via <a href="https://www.appveyor.com/">AppVeyor</a> for now) <a href="https://github.com/mozilla/mozregression/blob/495ef37e701709dce3a4b76ea67ec5b1f26043be/.github/workflows/build.yml#L86">from scratch</a>. Feel free to check the above out if you have a similar need.</p>

<h2 id="macos-big-sur">MacOS Big Sur</h2>

<p>As of version 4.0.17, the mozregression GUI now works on MacOS Big Sur. It is safe to ask community members to install and use it on this platform (though <a href="https://mozilla.github.io/mozregression/install.html#mozregression-gui">note the caveats</a> due to the bundle being unsigned).</p>

<h2 id="usage-dashboard">Usage Dashboard</h2>

<p>Fulfilling a promise I implied last year, I created a <a href="https://docs.telemetry.mozilla.org/cookbooks/public_data.html">public dataset</a> for mozregression and created an <a href="https://observablehq.com/@wlach/mozregression-public-usage-dashboard">dashboard tracking mozregression use</a> using <a href="https://observablehq.com/">Observable</a>. There are a few interesting insights and trends there that can be gleaned from our telemetry. I&rsquo;d be curious if the community can find any more!</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2020/08/mozregression-and-older-builds/">mozregression and older builds</a></h2>
    <p class="index-date">Aug 17th, 2020</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/mozregression.html">mozregression</a>  <a href="/tags/telemetry.html">telemetry</a></span></p>
  </header>

<p>Periodically the discussion comes up about pruning away old stored Firefox build artifacts in S3. Each build is tens of megabytes, multiply that by the number of platforms we support and the set of revisions we churn through on a daily basis, and pretty soon you&rsquo;re talking about real money.</p>

<p>This came up recently in a discussion about <a href="https://groups.google.com/g/mozilla.dev.platform/c/0OV_M3b-cMM/m/kkknfFdECgAJ">removing the legacy taskcluster deployment</a> &mdash; what do we actually lose by cutting back our archive of integration builds? The main reason to keep them around is to facilitate bisection testing with <a href="https://mozilla.github.io/mozregression/">mozregression</a>, to find out when a bug was introduced. Up to now, discussions about this have been a bit hand-wavey: we do keep logs about who&rsquo;s accessing old builds, but it&rsquo;s never been clear whether it was mozregression accessing them or something else.</p>

<p>Happily, now that <a href="/blog/2020/05/this-week-in-glean-mozregression-telemetry-part-2/">mozregression has some telemetry</a>, it&rsquo;s a little easier to get some answers on what people are actually doing. This query gets the distribution of build ages (launched or bisected) over the past 6 months, at a month long granularity.<sup><a href="#2020-08-17-mozregression-and-older-builds-footnote-1-definition" name="2020-08-17-mozregression-and-older-builds-footnote-1-return">1</a></sup> Ages are relative to the date mozregression was launched: for example, if someone asked for a build from May 2019 in June 2020, the number would be &ldquo;13&rdquo;.</p>

<div class="brush: sql">
 <div class="colorful">
  <pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">metrics</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">usage_app</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="n">metrics</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">usage_build_type</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">build_type</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="n">DATE_DIFF</span><span class="p">(</span><span class="nb">DATE</span><span class="p">(</span><span class="n">submission_timestamp</span><span class="p">),</span><span class="w"> </span><span class="k">IF</span><span class="p">(</span><span class="k">LENGTH</span><span class="p">(</span><span class="n">metrics</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">usage_bad_date</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">PARSE_DATE</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">metrics</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">usage_bad_date</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)),</span><span class="w"> </span><span class="n">PARSE_DATE</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="n">metrics</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">usage_launch_date</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">))),</span><span class="w"> </span><span class="k">MONTH</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">build_age</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">org_mozilla_mozregression</span><span class="p">.</span><span class="k">usage</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="nb">DATE</span><span class="p">(</span><span class="n">submission_timestamp</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">DATE_SUB</span><span class="p">(</span><span class="k">CURRENT_DATE</span><span class="p">(),</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="k">MONTH</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">client_info</span><span class="p">.</span><span class="n">app_display_version</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%dev%&#39;</span><span class="w"></span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="k">LENGTH</span><span class="p">(</span><span class="n">metrics</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">usage_build_type</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="p">(</span><span class="k">LENGTH</span><span class="p">(</span><span class="n">metrics</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">usage_bad_date</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">       </span><span class="k">OR</span><span class="w"> </span><span class="k">LENGTH</span><span class="p">(</span><span class="n">metrics</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">usage_launch_date</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
</pre></div>

</div>

<p>I ran this query on sql.telemetry.mozilla.org and generated a box plot, broken down by product and build type:</p>

<div class="figure"><img src="/files/2020/08/mozregression-build-age-box-plot.png" alt="" />
 <p class="caption"></p></div>

<p><a href="https://sql.telemetry.mozilla.org/queries/73968#184980">link</a> (requires Mozilla LDAP)</p>

<p>Unsurprisingly, Firefox shippable builds are the number one thing people try to bisect. Let&rsquo;s take a little bit of a closer look at what&rsquo;s going on there:</p>

<div class="figure"><img src="/files/2020/08/mozregression-build-age-box-plot-detail.png" alt="" />
 <p class="caption"></p></div>

<p>The median value is 1, which indicates that most people are bisecting builds within one month of the day in which mozregression was run. And the <a href="https://www.statisticshowto.com/upper-and-lower-fences/">upper fence</a> result is 6, suggesting that most of the time people are looking at a regression range that is within a 6 month range. However, looking more closely at the data points themselves (the little points in the chart above), there are a considerable number of outliers where a range greater than 20 months was asked for.</p>

<p>&hellip; which brings up to the question that we want to answer. Given that getting old builds isn&rsquo;t that common (which we sort of knew already, based on the access patterns in the S3 logs), what is the impact of the times that we do? And it&rsquo;s here where I have to throw up my hands and say &ldquo;I don&rsquo;t know&rdquo; and suggest that we go back to empirical observation and user research.</p>

<p>You can go back to the thread I linked above, and see that core Firefox/Gecko developers find the ability to get a precise regression range for older revisions valuable. One thing that&rsquo;s worth mentioning is that mozregression isn&rsquo;t run that often, compared to a product that we ship: on the order of 50 to 100 times per a day. But when it comes to internal tooling, a small amount of use might have a big impact: if a mozregression invocation a developer a few hours (or more), that&rsquo;s a real benefit to Firefox and Mozilla. The same argument might apply here, where a small number of bisections on older builds might have a disproportionate impact on the quality of the product.</p>

<div class="footnotes">
 <ol>
  <li id="2020-08-17-mozregression-and-older-builds-footnote-1-definition" class="footnote-definition">
   <p>I only added the telemetry to capture this information <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1651401">relatively recently</a>, so we&rsquo;re actually only looking at about a month of data in this post. We&rsquo;ll have more complete results later this year.&nbsp;<a href="#2020-08-17-mozregression-and-older-builds-footnote-1-return">↩</a></p></li></ol></div> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2020/06/mozregression-gui-now-available-for-linux/">mozregression GUI: now available for Linux</a></h2>
    <p class="index-date">Jun 29th, 2020</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p>Thanks to <a href="https://github.com/AnAverageHuman">@AnAverageHuman</a>, <a href="https://mozilla.github.io/mozregression">mozregression</a> once again has an easy to use and install GUI version for Linux! This used to work a few years ago, but got broken with some changes in the mozregression-python2 era and didn&rsquo;t get resolved until now:</p>

<div class="figure"><img src="/files/2020/06/mozregression-on-linux.png" alt="" />
 <p class="caption"></p></div>

<p>This is an area where using telemetry in mozregression can help us measure the impact of a change like this: although Windows still dominates in terms of marketshare, Linux is very widely used by contributors &mdash; of the usage of mozregression in the past 2 months, fully 30% of the sessions were on Linux (and it is possible we were undercounting that due to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1646402">bug 1646402</a>):</p>

<div class="figure"><img src="/files/2020/06/mozregression-usage-share-by-os.png" alt="" />
 <p class="caption"></p></div>

<p><a href="https://sql.telemetry.mozilla.org/queries/72363/source">link to query</a> (internal-only)</p>

<p>It will be interesting to watch the usage numbers for Linux evolve over the next few months. In particular, I&rsquo;m curious to see what percentage of users on that platform prefer a GUI.</p>

<h2 id="appendix-reducing-mozregression-guis-massive-size">Appendix: reducing mozregression-GUI&rsquo;s massive size</h2>

<p>One thing that&rsquo;s bothered me a bunch lately is that the mozregression GUI&rsquo;s size is <em>massive</em> and this is even more apparent on Linux, where the initial distribution of the GUI came in at over 120 megabytes! Why so big? There were a few reasons:</p>

<ol>
 <li><a href="https://pypi.org/project/PySide2/">PySide2</a> (the GUI library we use) is very large (10s of megabytes), and <a href="https://www.pyinstaller.org/">PyInstaller</a> packages <em>all of it</em> by default into your application distribution.</li>
 <li>The binary/rust portions of the <a href="https://pypi.org/project/glean-sdk/">Glean Python SDK</a> were been built with debugging information included (basically as a carry-over when it was a pre-alpha product), which made it 38 megabytes big (!) on Linux.</li>
 <li>On Linux at least, a large number of other system libraries are packaged into the distribution.</li></ol>

<p>A few aspects of this were under our control: Ian Moody (:Kwan) and myself crafted a script to manually remove unneeded PySide2 libraries as part of the packaging process. The Glean team was awesome-as-always and quickly rebuilt Glean without debugging information (this was basically an oversight). Finally, I managed to shave off a few more megabytes by reverting the Linux build to an earlier version of Ubuntu (Xenial), which is something I had been meaning to do anyway.</p>

<p>Even after doing all of these things, the end result is still a little underwhelming: the mozregression GUI distribution on Linux is still 79.5 megabytes big. There are probably other things we could do, but we&rsquo;re definitely entering the land of diminishing returns.</p>

<p>Honestly, my main takeaway is just not to build an application like this in Python unless you absolutely have to (e.g. you&rsquo;re building an application which needs system-level access). The web is a pretty wonderful medium for creating graphical applications these days, and by using it you sidestep these type of installation issues.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2020/05/this-week-in-glean-mozregression-telemetry-part-2/">This Week in Glean: mozregression telemetry (part 2)</a></h2>
    <p class="index-date">May 8th, 2020</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/Telemetry.html">Telemetry</a>  <a href="/tags/Glean.html">Glean</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p><em>(“This Week in Glean” is a series of blog posts that the Glean Team at Mozilla is using to try to communicate better about our work. They could be release notes, documentation, hopes, dreams, or whatever: so long as it is inspired by Glean. You can find <a href="https://mozilla.github.io/glean/book/appendix/twig.html">an index of all TWiG posts online.</a>)</em></p>

<p><em>This is a special guest post by non-Glean-team member William Lachance!</em></p>

<p>This is a continuation of an exploration of adding Glean-based telemetry to a python application, in this case <a href="https://mozilla.github.io/mozregression">mozregression</a>, a tool for automatically finding the source of Firefox regressions (breakage).</p>

<p>When we left off <a href="/blog/2020/02/this-week-in-glean-special-guest-post-mozregression-telemetry-part-1/">last time</a>, we had written some test scripts and verified that the data was visible in the debug viewer.</p>

<h2 id="adding-telemetry-to-mozregression-itself">Adding Telemetry to mozregression itself</h2>

<p>In many ways, this is pretty similar to what I did inside the sample application: the only significant difference is that these are shipped inside a Python application that is meant to be be installable via <a href="https://pypi.org/project/pip/">pip</a>. This means we need to specify the <code>pings.yaml</code> and <code>metrics.yaml</code> (located inside the <code>mozregression</code> subirectory) as package data inside <code>setup.py</code>:</p>

<div class="brush: py">
 <div class="colorful">
  <pre><span></span><span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">"mozregression"</span><span class="p">,</span>
    <span class="o">...</span>
    <span class="n">package_data</span><span class="o">=</span><span class="p">{</span><span class="s2">"mozregression"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"*.yaml"</span><span class="p">]},</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>

</div>

<p>There were also a number of Glean SDK enhancements which we determined were necessary. Most notably, Michael Droettboom added 32-bit Windows wheels to the Glean SDK, which we need to make building the <a href="https://mozilla.github.io/mozregression/quickstart.html#gui">mozregression GUI</a> on Windows possible. In addition, some minor changes needed to be made to Glean&rsquo;s behaviour for it to work correctly with a command-line tool like mozregression &mdash; for example, Glean used to assume that Telemetry would always be disabled via a GUI action so that it would send a deletion ping, but this would obviously not work in an application like mozregression where there is only a configuration file &mdash; so for this case, Glean needed to be modified to check if it had been disabled <em>between</em> runs.</p>

<p>Many thanks to Mike (and others on the Glean team) for so patiently listening to my concerns and modifying Glean accordingly.</p>

<h2 id="getting-data-review">Getting Data Review</h2>

<p>At Mozilla, we don&rsquo;t just allow random engineers like myself to start collecting data in a product that we ship (even a semi-internal like mozregression). We have <a href="https://wiki.mozilla.org/Firefox/Data_Collection">a process</a>, overseen by Data Stewards to make sure the information we gather is actually answering important questions and doesn&rsquo;t unnecessarily collect personally identifiable information (e.g. email addresses).</p>

<p>You can see the specifics of how this worked out in the case of mozregression in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581647#c9">bug 1581647</a>.</p>

<h2 id="documentation">Documentation</h2>

<p>Glean has some fantastic utilities for generating markdown-based documentation on what information is being collected, which I have made available on GitHub:</p>

<p><a href="https://github.com/mozilla/mozregression/blob/master/docs/glean/metrics.md">https://github.com/mozilla/mozregression/blob/master/docs/glean/metrics.md</a></p>

<p>The generation of this documentation is <a href="https://github.com/mozilla/mozregression/blob/3454e1eafe83f53a84cb6b10f46649320d5ed097/.travis.yml#L57">hooked up to mozregression&rsquo;s continuous integration</a>, so we can sure it&rsquo;s up to date.</p>

<p>I also added <a href="https://mozilla.github.io/mozregression/documentation/telemetry.html">a quick note</a> to mozregression&rsquo;s web site describing the feature, along with (very importantly) instructions on how to turn it off.</p>

<h2 id="enabling-data-ingestion">Enabling Data Ingestion</h2>

<p>Once a Glean-based project has passed data review, getting our infrastructure to ingest it is pretty straightforward. Normally <a href="https://mozilla.github.io/glean/book/user/adding-glean-to-your-project.html#adding-metadata-about-your-project-to-the-pipeline">we would suggest just filing a bug</a> and let us (the data team) handle the details, but since I&rsquo;m <em>on</em> that team, I&rsquo;m going to go a (little bit) of detail into how the sausage is made.</p>

<p>Behind the scenes, we have a collection of ETL (extract-transform-load) scripts in the <a href="https://github.com/mozilla/probe-scraper/">probe-scraper repository</a> which are responsible for parsing the ping and probe metadata files that I added to mozregression in the step above and then automatically creating BigQuery tables and updating our ingestion machinery to insert data passed to us there.</p>

<p>There&rsquo;s quite a bit of complicated machinery being the scenes to make this all work, but since it&rsquo;s already in place, adding a new thing like this is relatively simple. The changeset I submitted as part of a <a href="https://github.com/mozilla/probe-scraper/pull/184">pull request</a> to probe-scraper was all of 9 lines long:</p>

<div class="brush: diff">
 <div class="colorful">
  <pre><span></span><span class="gh">diff --git a/repositories.yaml b/repositories.yaml</span><span class="w"></span>
<span class="gh">index dffcccf..6212e55 100644</span><span class="w"></span>
<span class="gd">--- a/repositories.yaml</span><span class="w"></span>
<span class="gi">+++ b/repositories.yaml</span><span class="w"></span>
<span class="gu">@@ -239,3 +239,12 @@ firefox-android-release:</span><span class="w"></span>
<span class="w"> </span>    - org.mozilla.components:browser-engine-gecko-beta<span class="w"></span>
<span class="w"> </span>    - org.mozilla.appservices:logins<span class="w"></span>
<span class="w"> </span>    - org.mozilla.components:support-migration<span class="w"></span>
<span class="gi">+mozregression:</span><span class="w"></span>
<span class="gi">+  app_id: org-mozilla-mozregression</span><span class="w"></span>
<span class="gi">+  notification_emails:</span><span class="w"></span>
<span class="gi">+    - wlachance@mozilla.com</span><span class="w"></span>
<span class="gi">+  url: &#39;https://github.com/mozilla/mozregression&#39;</span><span class="w"></span>
<span class="gi">+  metrics_files:</span><span class="w"></span>
<span class="gi">+    - &#39;mozregression/metrics.yaml&#39;</span><span class="w"></span>
<span class="gi">+  ping_files:</span><span class="w"></span>
<span class="gi">+    - &#39;mozregression/pings.yaml&#39;</span><span class="w"></span>
</pre></div>

</div>

<h2 id="a-pretty-graph">A Pretty Graph</h2>

<p>With the probe scraper change merged and deployed, we can now start querying! A number of tables are automatically created according to the schema outlined above: notably &ldquo;live&rdquo; and &ldquo;stable&rdquo; tables corresponding to the usage ping. Using <a href="https://docs.telemetry.mozilla.org/tools/stmo.html">sql.telemetry.mozilla.org</a> we can start exploring what&rsquo;s out there. Here&rsquo;s a quick query I wrote up:</p>

<div class="brush: sql">
 <div class="colorful">
  <pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="nb">DATE</span><span class="p">(</span><span class="n">submission_timestamp</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nb">date</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="n">metrics</span><span class="p">.</span><span class="n">string</span><span class="p">.</span><span class="n">usage_variant</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">variant</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">org_mozilla_mozregression_stable</span><span class="p">.</span><span class="n">usage_v1</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="nb">DATE</span><span class="p">(</span><span class="n">submission_timestamp</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s1">&#39;2020-04-14&#39;</span><span class="w"></span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">client_info</span><span class="p">.</span><span class="n">app_display_version</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%.dev%&#39;</span><span class="w"></span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="nb">date</span><span class="p">,</span><span class="w"> </span><span class="n">variant</span><span class="p">;</span><span class="w"></span>
</pre></div>

</div>

<p>&hellip; which generates a chart like this:</p>

<div class="figure"><img src="/files/2020/05/mozregression-variant-usage.png" alt="" />
 <p class="caption"></p></div>

<p>This chart represents the absolute volume of mozregression usage since April 14th 2020 (around the time when we first released a version of mozregression with Glean telemetry), grouped by mozregression &ldquo;variant&rdquo; (GUI, console, and mach) and date - you can see that (unsurprisingly?) the GUI has the highest usage. I&rsquo;ll talk about this more in an upcoming installment, speaking of&hellip;</p>

<h2 id="next-steps">Next Steps</h2>

<p>We&rsquo;re not done yet! Next time, we&rsquo;ll look into making a public-facing dashboard demonstrating these results and making an aggregated version of the mozregression telemetry data publicly accessible to researchers and the general public. If we&rsquo;re lucky, there might even be a bit of <em>data science</em>. Stay tuned!</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2020/04/mozregression-for-macos/">mozregression for MacOS</a></h2>
    <p class="index-date">Apr 24th, 2020</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p>Just a quick note that, as a side-effect of the work I mentioned a while ago to <a href="/blog/2020/02/this-week-in-glean-special-guest-post-mozregression-telemetry-part-1/">add telemetry to mozregression</a>, mozregression now has a graphical Mac client! It&rsquo;s a bit of a pain to install (since it&rsquo;s unsigned), but likely worlds easier for the average person to get going than the command-line version. Please feel free to <a href="https://mozilla.github.io/mozregression/install.html">point people to it</a> if you&rsquo;re looking to get a regression range for a MacOS-specific problem with Firefox.</p>

<center><img style="width:600px" src="/files/2020/04/mozregression-gui-mac.png" /></center>

<p>More details: The <a href="https://mozilla.github.io/glean/book/dev/python/index.html">Glean Python SDK</a>, which <a href="https://mozilla.github.io/mozregression/documentation/telemetry.html">mozregression now uses for telemetry</a>, requires Python 3. This provided the impetus to port the GUI itself to Python 3 and PySide2 (the modern incarnation of PyQt), which brought with it a much easier installation/development experience for the GUI on platforms like Mac and Linux.</p>

<p>I haven&rsquo;t gotten around to producing GUI binaries for the Linux yet, but it should not be much work.</p>

<p>Speaking of Glean, mozregression, and Telemetry, stay tuned for more updates on that soon. It&rsquo;s been an adventure!</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2020/02/this-week-in-glean-special-guest-post-mozregression-telemetry-part-1/">This week in Glean (special guest post): mozregression telemetry (part 1)</a></h2>
    <p class="index-date">Feb 28th, 2020</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/Telemetry.html">Telemetry</a>  <a href="/tags/Glean.html">Glean</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p><em>(“This Week in Glean” is a series of blog posts that the Glean Team at Mozilla is using to try to communicate better about our work. They could be release notes, documentation, hopes, dreams, or whatever: so long as it is inspired by Glean. You can find <a href="https://mozilla.github.io/glean/book/appendix/twig.html">an index of all TWiG posts online.</a>)</em></p>

<p><em>This is a special guest post by non-Glean-team member William Lachance!</em></p>

<p>As I <a href="/blog/2019/09/mozregression-update-python-3-edition/">mentioned last time</a> I talked about <a href="https://mozilla.github.io/mozregression/">mozregression</a>, I have been thinking about adding some telemetry to the system to better understand the usage of this tool, to justify some part of Mozilla spending some cycles maintaining and improving it (assuming my intuition that this tool is heavily used is confirmed).</p>

<p>Coincidentally, the Telemetry client team has been working on a new library for measuring these types of things in a principled way called <a href="https://mozilla.github.io/glean/book/index.html">Glean</a>, which even has python bindings! Using this has the potential in saving a lot of work: not only does Glean provide a framework for submitting data, our backend systems are automatically set up to process data submitted via into Glean into <a href="https://cloud.google.com/bigquery">BigQuery</a> tables, which can then easily be queried using tools like <a href="https://docs.telemetry.mozilla.org/tools/stmo.html">sql.telemetry.mozilla.org</a>.</p>

<p>I thought it might be useful to go through some of what I&rsquo;ve been exploring, in case others at Mozilla are interested in instrumenting their pet internal tools or projects. If this effort is successful, I&rsquo;ll distill these notes into a tutorial in the Glean documentation.</p>

<h2 id="initial-steps-defining-pings-and-metrics">Initial steps: defining pings and metrics</h2>

<p>The initial step in setting up a Glean project of any type is to define explicitly the types of pings and metrics. You can look at a &ldquo;ping&rdquo; as being a small bucket of data submitted by a piece of software in the field. A &ldquo;metric&rdquo; is something we&rsquo;re measuring and including in a ping.</p>

<p>Most of the Glean documentation focuses on browser-based use-cases where we might want to sample lots of different things on an ongoing basis, but for mozregression our needs are considerably simpler: we just want to know when someone <em>has</em> used it along with a small number of non-personally identifiable characteristics of their usage, e.g. the mozregression version number and the name of the application they are bisecting.</p>

<p>Glean has <a href="https://mozilla.github.io/glean/book/user/pings/events.html">the concept of event pings</a>, but it seems like those are there more for a fine-grained view of what&rsquo;s going on during an application&rsquo;s use. So let&rsquo;s define a new ping just for ourselves, giving it the unimaginative name &ldquo;usage&rdquo;. This goes in a file called <code>pings.yaml</code>:</p>

<div class="brush: yaml">
 <div class="colorful">
  <pre><span></span><span class="nn">---</span><span class="w"></span>
<span class="nt">$schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">moz://mozilla.org/schemas/glean/pings/1-0-0</span><span class="w"></span>

<span class="nt">usage</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="no">A ping to record usage of mozregression</span><span class="w"></span>
<span class="w">  </span><span class="nt">include_client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">  </span><span class="nt">notification_emails</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wlachance@mozilla.com</span><span class="w"></span>
<span class="w">  </span><span class="nt">bugs</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://bugzilla.mozilla.org/123456789/</span><span class="w"></span>
<span class="w">  </span><span class="nt">data_reviews</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://example.com/path/to/data-review</span><span class="w"></span>
</pre></div>

</div>

<p>We also need to define a list of things we want to measure. To start with, let&rsquo;s just test with one piece of sample information: the app we&rsquo;re bisecting (e.g. &ldquo;Firefox&rdquo; or &ldquo;Gecko View Example&rdquo;). This goes in a file called <code>metrics.yaml</code>:</p>

<div class="brush: yaml">
 <div class="colorful">
  <pre><span></span><span class="nn">---</span><span class="w"></span>
<span class="nt">$schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">moz://mozilla.org/schemas/glean/metrics/1-0-0</span><span class="w"></span>

<span class="nt">usage</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">app</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w"></span>
<span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">&gt;</span><span class="w"></span>
<span class="w">      </span><span class="no">The name of the app being bisected</span><span class="w"></span>
<span class="w">    </span><span class="nt">notification_emails</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">wlachance@mozilla.com</span><span class="w"></span>
<span class="w">    </span><span class="nt">bugs</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://bugzilla.mozilla.org/show_bug.cgi?id=1581647</span><span class="w"></span>
<span class="w">    </span><span class="nt">data_reviews</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://example.com/path/to/data-review</span><span class="w"></span>
<span class="w">    </span><span class="nt">expires</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">never</span><span class="w"></span>
<span class="w">    </span><span class="nt">send_in_pings</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">usage</span><span class="w"></span>
</pre></div>

</div>

<p>The <code>data_reviews</code> sections in both of the above are obviously bogus, we will need to actually get data review before landing and using this code, to make sure that we&rsquo;re in conformance with Mozilla&rsquo;s <a href="https://wiki.mozilla.org/Firefox/Data_Collection">data collection policies</a>.</p>

<h2 id="testing-it-out">Testing it out</h2>

<p>But in the mean time, we can test our setup with the <a href="https://docs.telemetry.mozilla.org/concepts/glean/debug_ping_view.html">Glean debug pings viewer</a> by setting a special tag (<code>mozregression-test-tag</code>) on our output. Here&rsquo;s a small python script which does just that:</p>

<div class="brush: py">
 <div class="colorful">
  <pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">glean</span> <span class="kn">import</span> <span class="n">Glean</span><span class="p">,</span> <span class="n">Configuration</span>
<span class="kn">from</span> <span class="nn">glean</span> <span class="kn">import</span> <span class="p">(</span><span class="n">load_metrics</span><span class="p">,</span>
                   <span class="n">load_pings</span><span class="p">)</span>

<span class="n">mozregression_path</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s1">&#39;.mozilla2&#39;</span> <span class="o">/</span> <span class="s1">&#39;mozregression&#39;</span>

<span class="n">Glean</span><span class="o">.</span><span class="n">initialize</span><span class="p">(</span>
    <span class="n">application_id</span><span class="o">=</span><span class="s2">"mozregression"</span><span class="p">,</span>
    <span class="n">application_version</span><span class="o">=</span><span class="s2">"0.1.1"</span><span class="p">,</span>
    <span class="n">upload_enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">configuration</span><span class="o">=</span><span class="n">Configuration</span><span class="p">(</span>
      <span class="n">ping_tag</span><span class="o">=</span><span class="s2">"mozregression-test-tag"</span>
    <span class="p">),</span>
    <span class="n">data_dir</span><span class="o">=</span><span class="n">mozregression_path</span> <span class="o">/</span> <span class="s2">"data"</span>
<span class="p">)</span>
<span class="n">Glean</span><span class="o">.</span><span class="n">set_upload_enabled</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">pings</span> <span class="o">=</span> <span class="n">load_pings</span><span class="p">(</span><span class="s2">"pings.yaml"</span><span class="p">)</span>
<span class="n">metrics</span> <span class="o">=</span> <span class="n">load_metrics</span><span class="p">(</span><span class="s2">"metrics.yaml"</span><span class="p">)</span>

<span class="n">metrics</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">"reality"</span><span class="p">)</span>
<span class="n">pings</span><span class="o">.</span><span class="n">usage</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
</pre></div>

</div>

<p>Running this script on my laptop, I see that a respectable JSON payload was delivered to and processed by our servers:</p>

<p><img style="width:600px" src="/files/2020/02/glean-debug-ping-viewer.png" /></p>

<p>As you can see, we&rsquo;re successfully processing both the &ldquo;version&rdquo; number of mozregression, some characteristics of the machine sending the information (my MacBook in this case), as well as our single measure. We also have a client id, which should tell us roughly how many distinct installations of mozregression are sending pings. This should be more than sufficient for an initial &ldquo;mozregression usage dashboard&rdquo;.</p>

<h2 id="next-steps">Next steps</h2>

<p>There are a bunch of things I still need to work through before landing this inside mozregression itself. Notably, the Glean python bindings are python3-only, so we&rsquo;ll need to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1426766">port the mozregression GUI to python 3</a> before we can start measuring usage there. But I&rsquo;m excited at how quickly this work is coming together: stay tuned for part 2 in a few weeks.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2019/09/mozregression-update-python-3-edition/">mozregression update: python 3 edition</a></h2>
    <p class="index-date">Sep 16th, 2019</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p>For those who are still wondering, yup, I am still maintaining <a href="https://mozilla.github.io/mozregression/">mozregression</a>, though increasingly reluctantly. Given how important this project is to the development of Firefox (getting a regression window using mozregression is standard operating procedure whenever a new bug is reported in Firefox), it feels like this project is pretty vital, so I continue out of some sense of obligation &mdash; but really, someone more interested in Mozilla&rsquo;a build, automation and testing systems would be better suited to this task: over the past few years, my interests/focus have shifted away from this area to building up Mozilla&rsquo;s data storage and visualization platform.</p>

<p>This post will describe some of the things that have happened in the last year and where I see the project going. My hope is to attract some new blood to add some needed features to the project and maybe take on some of the maintainership duties.</p>

<h2 id="python-3">python 3</h2>

<p>The most important update is that, as of today, the command-line version of mozregression (v3.0.1) should work with python 3.5+. <a href="https://python-modernize.readthedocs.io/en/latest/">modernize</a> did most of the work for us, though there were some unit tests that needed updating: special thanks to <a href="https://github.com/gloomy-ghost">@gloomy-ghost</a> for helping with that.</p>

<p>For now, we will continue to support python 2.7 in parallel, mainly because the GUI has not yet been ported to python 3 (more on that later) and we have CI to make sure it doesn&rsquo;t break.</p>

<h2 id="other-updates">other updates</h2>

<p>The last year has mostly been one of maintenance. Thanks in particular to Ian Moody (:kwan) for his work throughout the year &mdash; including patches to adapt mozregression support to our new updates policy and shippable builds (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1532412">bug 1532412</a>), and Kartikaya Gupta (:kats) for adding support for bisecting the GeckoView example app (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1507225">bug 1507225</a>).</p>

<h2 id="future-work">future work</h2>

<p>There are a bunch of things I see us wanting to add or change with mozregression over the next year or so. I might get to some of these if I have some spare cycles, but probably best not to count on it:</p>

<ul>
 <li>Port the mozregression GUI to Python 3 (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581633">bug  1581633</a>) As mentioned  above, the command-line client works with python 3, but we have yet to port  the <a href="">GUI</a>. We should do that. This probably also entails porting the GUI to  use PyQT5 (which is pip-installable and thus much easier to integrate into a  CI process), see <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1426766">bug 1426766</a>.</li>
 <li>Make self-contained GUI builds available for MacOS X (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1425105">bug  1425105</a>) and Linux  (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581643">bug 1581643</a>).</li>
 <li>Improve our mechanism for producing a standalone version of the GUI in  general. We&rsquo;ve used <a href="https://github.com/anthony-tuininga/cx_Freeze">cx_Freeze</a>  which mostly works ok, but has a number of problems (e.g. it pulls in a bunch of unnecessary dependencies, which  bloats the size of the installer). Upgrading the GUI to use python 3 may  alleviate some of these issues, but it might be worth considering other  options in this space, like Gregory Szorc&rsquo;s <a href="https://github.com/indygreg/PyOxidizer">pyoxidizer</a>.</li>
 <li>Add some kind of telemetry to mozregression to measure usage of this tool  (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581647">bug 1581647</a>).  My anecdotal experience is that this tool is pretty invaluable for Firefox  development and QA, but this is not immediately apparent to Mozilla&rsquo;s  leadership and it&rsquo;s thus very difficult to convince people to spend their  cycles on maintaining and improving this tool. Field data may help change  that story.</li>
 <li>Supporting new Mozilla products which aren&rsquo;t built (entirely) out of mozilla-central,  most especially Fenix (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1556042">bug 1556042</a>)  and Firefox Reality (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1568488">bug 1568488</a>).  This is probably rather involved (mozregression has a big pile of assumptions about how  the builds it pulls down are stored and organized) but that doesn&rsquo;t mean that  this work isn&rsquo;t necessary.</li></ul>

<p>If you&rsquo;re interested in working on any of the above, please feel free to dive in on one of the above bugs. I can&rsquo;t offer formal mentorship, but am happy to help out where I can.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2017/07/mozregression-s-new-mascot/">mozregression&rsquo;s new mascot</a></h2>
    <p class="index-date">Jul 3131, 2017</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p>Spent a few hours this morning on a few housekeeping issues with <a href="https://mozilla.github.io/mozregression">mozregression</a>. The web site was badly in need of an update (it was full of references to obsolete stuff like B2G and codefirefox.com) and the usual pile of fixes motivated a new release of the actual software. But most importantly, mozregression now has a proper application icon / logo, thanks to Victoria Wang!</p>

<p><img src="/files/2017/07/mozregressionicon3.png" /></p>

<p>One of the nice parts about working at Mozilla is the flexibility it offers to just hack on stuff that&rsquo;s important, whether or not it&rsquo;s part of your formal job description. Maintaining mozregression is pretty far outside my current set of responsibilities (or even interests), but I keep it going because it&rsquo;s a key tool used by developers team here and no one else seems willing to take it over. Fortunately, tools like appveyor and pypi keep the time suckage to a mostly-reasonable level.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2015/01/mozregression-updates/">mozregression updates</a></h2>
    <p class="index-date">Jan 27th, 2015</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p>Lots of movement in <a href="http://mozilla.github.io/mozregression">mozregression</a> (a tool for automatically determining when a regression was introduced in Firefox by bisecting builds on ftp.mozilla.org) in the last few months. Here&rsquo;s some highlights:</p>

<ul>
 <li>Support for win64 nightly and inbound builds (Kapil Singh, Vaibhav Agarwal)</li>
 <li>Support for using an http cache to reduce time spent downloading builds (Sam Garrett)</li>
 <li>Way better logging and printing of remaining time to finish bisection (Julien Pagès)</li>
 <li>Much improved performance when bisecting inbound (Julien)</li>
 <li>Support for automatic determination on whether a build is good/bad via a custom script (Julien)</li>
 <li>Tons of bug fixes and other robustness improvements (me, Sam, Julien, others)</li></ul>

<p>Also thanks to Julien, we have a <a href="http://mozilla.github.io/mozregression/">spiffy new website</a> which documents many of these features. If it&rsquo;s been a while, be sure to <a href="http://mozilla.github.io/mozregression/install.html">update your copy of mozregression to the latest version</a> and check out the site for documentation on how to use the new features described above!</p>

<p>Thanks to everyone involved (especially Julien) for all the hard work. Hopefully the payoff will be a tool that&rsquo;s just that much more useful to Firefox contributors everywhere.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2014/09/mozregression-0-24/">mozregression 0.24</a></h2>
    <p class="index-date">Sep 15th, 2014</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a>  <a href="/tags/mozregression.html">mozregression</a></span></p>
  </header>

<p>I just released <a href="http://mozilla.github.io/mozregression/">mozregression</a> 0.24. This would be a good time to note some of the user-visible fixes / additions that have gone in recently:</p>

<ol>
 <li>
  <p>Thanks to Sam Garrett, you can now specify a different branch other than inbound to get finer grained regression ranges from. E.g. if you&rsquo;re pretty sure a regression occurred on fx-team, you can do something like:  <code>mozregression --inbound-branch fx-team -g 2014-09-13 -b 2014-09-14</code></p></li>
 <li>Fixed a bug where we could get an incorrect regression range (<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1059856">bug 1059856</a>). Unfortunately the root cause of the bug is still open (it&rsquo;s a bit tricky to match mozilla-central commits to that of other branches) but I think this most recent fix should make things work in 99.9% of cases. Let me know if I&rsquo;m wrong.</li>
 <li>Thanks to Julien Pagès, we now download the inbound build metadata in parallel, which speeds up inbound bisection quite significantly</li></ol>

<p>If you know a bit of python, contributing to mozregression is a great way to have a high impact on Mozilla. Many platform developers use this project in their day-to-day work, but there&rsquo;s still <a href="https://bugzilla.mozilla.org/buglist.cgi?component=mozregression&amp;product=Testing">lots of room for improvement</a>.</p> 
  <hr/>
</article>
<footer>
 <ul class="pagination">
  <li class="page-item disabled"><a class="page-link" href="#">
    <quote>&larr;</quote></a></li>
  <li class="page-item active"><a class="page-link" href="/tags/mozregression.html">1</a></li>
  <li class="page-item"><a class="page-link" href="/tags/mozregression-2.html">2</a></li>
  <li class="page-item"><a class="page-link" href="/tags/mozregression-2.html">
    <quote>&rarr;</quote></a></li></ul></footer>
    </div>
    <footer class="container max-w-screen-md px-8 py-4 mx-auto less-important">
      <p>Comments / thoughts? Feel free to send an email to wlach on protonmail.com.</p>
      <p>
        Site generated by
        <a href="https://github.com/greghendershott/frog">Frog</a>.
        Post content is licensed under a
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"
          >Creative Commons Attribution 4.0 Unported License</a
        >.
      </p>
    </footer>
  </body>
</html>