<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Posts tagged 'hbus'</title>
    <meta name="description" content="Posts tagged 'hbus'">
    <meta name="author"      content="William Lachance">
    <meta name="keywords"    content="hbus">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/favicon.ico">
    <link rel="canonical" href="https://wlach.github.io/tags/hbus.html">


    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/scribble.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/feeds/hbus.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/feeds/hbus.rss.xml" title="RSS Feed">
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-xxxxx', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <!-- A standard Twitter Bootstrap nav bar -->
    <header class="navbar navbar-default navbar-inverse"
            role="banner">
      <div class="container">
        <div class="navbar-header">
          <button type="button"
                  class="navbar-toggle"
                  data-toggle="collapse"
                  data-target=".our-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="/index.html" class="navbar-brand">William Lachance's Log</a>
        </div>
        <div class="collapse navbar-collapse our-nav-collapse"
             role="navigation">
          <ul class="nav navbar-nav">

            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Tags <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="/index.html">All Posts</a></li>

<li><a href="/tags/Android.html">Android</a></li>

<li><a href="/tags/ateam.html">ateam</a></li>

<li><a href="/tags/Bikes.html">Bikes</a></li>

<li><a href="/tags/BIXI.html">BIXI</a></li>

<li><a href="/tags/Buddhism.html">Buddhism</a></li>

<li><a href="/tags/Business.html">Business</a></li>

<li><a href="/tags/Cats.html">Cats</a></li>

<li><a href="/tags/Coffee.html">Coffee</a></li>

<li><a href="/tags/Community.html">Community</a></li>

<li><a href="/tags/Counting.html">Counting</a></li>

<li><a href="/tags/Data.html">Data</a></li>

<li><a href="/tags/Data-Visualization.html">Data Visualization</a></li>

<li><a href="/tags/Docker.html">Docker</a></li>

<li><a href="/tags/Ebola.html">Ebola</a></li>

<li><a href="/tags/Eideticker.html">Eideticker</a></li>

<li><a href="/tags/email.html">email</a></li>

<li><a href="/tags/Environment.html">Environment</a></li>

<li><a href="/tags/FirefoxOS.html">FirefoxOS</a></li>

<li><a href="/tags/Food.html">Food</a></li>

<li><a href="/tags/Free-Software.html">Free Software</a></li>

<li><a href="/tags/GNOME.html">GNOME</a></li>

<li><a href="/tags/GoFaster.html">GoFaster</a></li>

<li><a href="/tags/hbus.html">hbus</a></li>

<li><a href="/tags/Infraherder.html">Infraherder</a></li>

<li><a href="/tags/Iodide.html">Iodide</a></li>

<li><a href="/tags/iphone.html">iphone</a></li>

<li><a href="/tags/Life.html">Life</a></li>

<li><a href="/tags/Meditation.html">Meditation</a></li>

<li><a href="/tags/Meta.html">Meta</a></li>

<li><a href="/tags/Metrics-Graphics.html">Metrics Graphics</a></li>

<li><a href="/tags/Mission-Control.html">Mission Control</a></li>

<li><a href="/tags/Montreal.html">Montreal</a></li>

<li><a href="/tags/Mozilla.html">Mozilla</a></li>

<li><a href="/tags/mozregression.html">mozregression</a></li>

<li><a href="/tags/MSF.html">MSF</a></li>

<li><a href="/tags/Music.html">Music</a></li>

<li><a href="/tags/Nixi.html">Nixi</a></li>

<li><a href="/tags/Open-Data.html">Open Data</a></li>

<li><a href="/tags/Orangutan.html">Orangutan</a></li>

<li><a href="/tags/Pandaboard.html">Pandaboard</a></li>

<li><a href="/tags/Perfherder.html">Perfherder</a></li>

<li><a href="/tags/Performance.html">Performance</a></li>

<li><a href="/tags/Philosophy.html">Philosophy</a></li>

<li><a href="/tags/Polling.html">Polling</a></li>

<li><a href="/tags/Profiling.html">Profiling</a></li>

<li><a href="/tags/Psychology.html">Psychology</a></li>

<li><a href="/tags/Python.html">Python</a></li>

<li><a href="/tags/Release-Engineering.html">Release Engineering</a></li>

<li><a href="/tags/Responsiveness.html">Responsiveness</a></li>

<li><a href="/tags/Social-Media.html">Social Media</a></li>

<li><a href="/tags/SQL.html">SQL</a></li>

<li><a href="/tags/Statistics.html">Statistics</a></li>

<li><a href="/tags/Talos.html">Talos</a></li>

<li><a href="/tags/Taskcluster.html">Taskcluster</a></li>

<li><a href="/tags/Telemetry.html">Telemetry</a></li>

<li><a href="/tags/Time.html">Time</a></li>

<li><a href="/tags/Toronto.html">Toronto</a></li>

<li><a href="/tags/Transit.html">Transit</a></li>

<li><a href="/tags/Transit-to-Go.html">Transit to Go</a></li>

<li><a href="/tags/Treeherder.html">Treeherder</a></li>

<li><a href="/tags/Usability.html">Usability</a></li>

<li><a href="/tags/Video.html">Video</a></li>

<li><a href="/tags/Web.html">Web</a></li>

<li><a href="/tags/WifiDog.html">WifiDog</a></li>

<li><a href="/tags/zen.html">zen</a></li>

<li><a href="/tags/I%CC%82le-Sans-Fil.html">ÃŽle Sans Fil</a></li>
              </ul>
            </li>
            <li>
              <a href="/About.html">About</a>
            </li> 
            <li><a href="/feeds/hbus.atom.xml">Atom</a></li>
            <li><a href="/feeds/hbus.rss.xml">RSS</a></li>
          </ul>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="row">

        <!-- Main column -->
        <div id="content" class="col-md-12">

          <h1>Posts tagged <em>hbus</em></h1>

          <article>
  <header>
    <p><span class="tags"><a href="/tags/BIXI.html">BIXI</a>, <a href="/tags/Free-Software.html">Free Software</a>, <a href="/tags/hbus.html">hbus</a>, <a href="/tags/Montreal.html">Montreal</a>, <a href="/tags/Open-Data.html">Open Data</a></span></p>
    <h2><a href='/blog/2011/09/updates-on-my-ridiculous-pet-projects/'>Updates on my ridiculous pet projects</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Sep 29th, 2011</p>
  </header>

<ol>
 <li>
  <p>As you may or may not have noticed, <a href="http://hbus.ca">hbus.ca</a> has been down for the past few weeks. Halifax updated the data but I didn&#8217;t have a chance to update it. Well, I finally did, and hbus is now up in its former glory (minus a small issue with stops named &#8216;6016_merged_3300509&#8217;: thanks Metro Transit, time to update <a href="https://github.com/wlach/routez/blob/master/src/gtfs-hacks/update-halifax-gtfs.py">that script</a> to massage your data again!) . I still wonder a bit about why I keep putting time into a site oriented around a city I haven&#8217;t lived in for over 2 years now (especially when Google Maps arguably does a better job at most things than I do), but there you go!</p></li>
 <li>
  <p><a href="http://nixi.ca">NIXI</a> is still up and being useful to me, though I&#8217;m a little bit disappointed by its uptake from the rest of the world (the site gets like 5&ndash;12 unique views a day). What do I need to do for you guys? A mobile version? French localization? I just added support for Washington (Capital Bikeshare) and Boston (Hubway), maybe it&#8217;ll get some uptake there.</p></li>
 <li>
  <p>Not really my project, but Stephane Guidoin put up an awesome site called <a href="http://zonecone.ca">zonecone.ca</a> which helps you find out about traffic obstacles that might delay your journey. It even has a nifty feature where you can create an account, specify a route you take regularly (say, your commute), and it&#8217;ll automatically notify you if something pops up. As you may have guessed, I&#8217;m not the biggest fan of automobiles, but this is still very cool. ðŸ˜‰ This site was originally based on <a href="http://wrla.ch/blog/2011/06/template-for-a-map-based-web-app/">the map layout template</a> that I announced a few months ago.</p></li>
 <li>
  <p>I have a lettuce plant growing on my new balcony. It&#8217;s doing ok, though it will probably have to be brought in soon due to frost. Will it get enough sun? Can I prevent my cat from eating it? Will it make a delicious salad? Stay tuned!</p></li></ol>

</article>

<article>
  <header>
    <p><span class="tags"><a href="/tags/Free-Software.html">Free Software</a>, <a href="/tags/hbus.html">hbus</a>, <a href="/tags/Open-Data.html">Open Data</a>, <a href="/tags/Transit-to-Go.html">Transit to Go</a></span></p>
    <h2><a href='/blog/2011/04/routez-opensourced/'>Routez opensourced</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Apr 19th, 2011</p>
  </header>

<p>Just a quick note to say that I just opensourced the software behind <a href="http://hbus.ca">hbus.ca</a>, nicknamed &#8220;Routez&#8221; under the <a href="http://www.affero.org/oagpl.html">Affero GPL</a>. You can get the code on <a href="http://github.com/wlach/routez">github</a>.</p>

<p><a href="http://wrla.ch/blog/2011/04/routez-opensourced/hbus_shot_apr_2011/" rel="attachment wp-att-238"><img src="/files/2011/04/hbus_shot_apr_2011.png" alt="" title="hbus_shot_apr_2011" width="300" height="225" class="aligncenter size-full wp-image-238" /></a></p>

<p>For those new to the project, hbus.ca is a generic trip planning / transit information site for Halifax, Nova Scotia written using the <a href="http://www.django-project.com">Django</a> web framework. It currently has two main features:</p>

<ul>
 <li>A trip planning front-end much like Google Transit (built from the ground up using the <a href="http://github.com/wlach/libroutez">libroutez</a> library).</li>
 <li>A &#8220;nearby&#8221; routes feature which gives you all the bus departures near a particular location.</li></ul>

<p>On the backend, both of these features are accessible via JSON APIs, for use in transit apps, etc. <a href="http://transittogo.mindsea.ca">Transit to Go</a> uses these to great effect.</p>

<p>There is nothing particularly Halifax-specific to the underlying Routez software, aside from various references in the web front end to Halifax and hbus.ca. In fact, we use Routez to provide information for Transit to Go Edmonton right now, with no modification.</p>

<p>Originally my plan was to release something that was completely generic out of the box so that anyone could trivially make up a version of this site for their favourite city. I&#8217;ve made some headway towards that goal over the last week or so, but there&#8217;s still some ways to go. There&#8217;s basically two major issues:</p>

<ol>
 <li>The geocoder depends on information gleaned from the geobase road network dataset. The intent behind this is noble (provide an end-to-end solution that doesn&#8217;t depend on third parties) but in practice this limits the software&#8217;s usefulness. It would be better to optionally allow a Routez-based site to use Google&#8217;s geocoder on the front-end. Unfortunately, to comply with Google&#8217;s terms of service, we&#8217;d also need to use their Maps API for the base map as well. Perhaps the best option here would be to use something like <a href="http://mapstraction.com">Mapstraction</a> to allow users to select their preferred mapping provider.
  <br /></li>
 <li>The trip planning software used in the backend, libroutez, is getting a bit long in the tooth and is quite finicky about what kind of data it will accept. I think the long-term solution to this is to switch to <a href="http://graphserver.github.com/graphserver/">Graphserver</a> (which is more mature and better supported), but some features would have to be added to it to support the kind of things that Routez needs (like a list of upcoming departures at a particular transit stop).</li></ol>

<p>Even with these problems, I figured it would be better to open up what I have for people to check out and play with. Have a look and let me know what you think!</p>

</article>

<article>
  <header>
    <p><span class="tags"><a href="/tags/hbus.html">hbus</a></span></p>
    <h2><a href='/blog/2010/08/google-transit-halifax-is-down-but-hbus-and-transit-to-go-are-still-up/'>Google Transit Halifax is down (but hbus and Transit to Go are still up)</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Aug 29th, 2010</p>
  </header>

<p>Due to some schedule adjustments, it appears as if Metro Transit&#8217;s Google Transit is <a href="http://www.halifax.ca/googletransit/">temporarily out of service</a> while they wait for Google to process their new transit feed.</p>

<p>However, fear not! Unlike Google, obsessive compulsive computer programmer William Lachance works on weekends for free (or the low, low price of $1.99 in the case of iPhone applications) so your thirst for updated transit information can be satisfied. I link to these things often enough on this blog, but here they are again, for the benefit of first time viewers:</p>

<ul>
 <li><a href="http://hbus.ca">hbus.ca</a></li>
 <li><a href="http://transittogo.mindsea.ca">Transit to Go</a>    In other news, it appears as if Metro Transit has finally seen the light and made their transit information available to anyone who wants it. I would like to think that I might have had <a href="http://www.thecoast.ca/halifax/beta-the-public-transit-day-tripper/Content?oid=1098826">something to do with this</a>, but I honestly have no idea. Anyway, if you want to check it out, it&#8217;s available <a href="http://www.halifax.ca/GoogleTransit/developerdata.html">here</a>.</li></ul>

</article>

<article>
  <header>
    <p><span class="tags"><a href="/tags/hbus.html">hbus</a></span></p>
    <h2><a href='/blog/2010/05/hbus-is-back/'>hbus is back</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> May 24th, 2010</p>
  </header>

<p><a href="http://hbus.ca"><img src="/files/2010/05/hbus_shot1.png" alt="hbus_shot" title="hbus_shot" width="320" height="181" class="alignleft size-full wp-image-135" /></a></p>

<p>After a month long hiatus, I finally had a chance to get <a href="http://hbus.ca">hbus.ca</a> back into a working state. The big difference is that we&#8217;re now using the <a href="http://www.mindsea.com/2010/03/03/transit-to-go-pulling-out-all-the-stops/">official HRM transit data</a>. Lots more remains to be done to make this site competitive for 2010 (most of the recent work has been back-end infrastructure stuff), but at least it&#8217;s usable again.</p>

</article>

<article>
  <header>
    <p><span class="tags"><a href="/tags/hbus.html">hbus</a>, <a href="/tags/Transit-to-Go.html">Transit to Go</a></span></p>
    <h2><a href='/blog/2010/04/oh-the-lines-and-some-help-for-edmonton/'>Oh, the lines! And some help for Edmonton.</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Apr 10th, 2010</p>
  </header>

<p><img src="/files/2010/04/linked_map1.jpg" alt="Map with new link nodes" title="Map with new link nodes" width="320" height="242" class="aligncenter size-full wp-image-118" /></p>

<p>A productive day on the transit development front. Finished up a few big features related to hbus.ca and Transit to Go:</p>

<ul>
 <li>Sped up the graph and database generation by an order of magnitude. Not too exciting from a user perspective, but I should now be able to iterate the codebase much faster.</li>
 <li>Better transit stop / street graph linking: No more does libroutez simply try to find the closest street level vertice to link to when merging transit stops with street information&#8211; we now actually create _new_ street level vertices as needed and link to those. Upshot? Slightly better directions and prettier polylines. When I first thought up the algorithm a month ago, I thought I was totally brilliant, only to later find out that Andrew Byrd had done something almost identical a few months earlier for <a href="http://github.com/andrewbyrd/graphserver">graphserver</a>. Ah well, at least it&#8217;s implemented.</li>
 <li>I <a href="http://gist.github.com/361848">coded up a script</a> to automatically generate synthetic headsigns for GTFS feeds which don&#8217;t have them. This was needed to provide a sensible view for the Edmonton version of Transit to Go. All the props in the world for opening up your data guys, but can&#8217;t you do better than saying that all your buses go in the &#8220;1&#8221; direction? There&#8217;s a reason why it&#8217;s a required field you know. Not only would it help me, but <a href="http://google.com/transit">Google Transit</a> would give better results for your city as well.</li></ul>

</article>

<article>
  <header>
    <p><span class="tags"><a href="/tags/hbus.html">hbus</a></span></p>
    <h2><a href='/blog/2010/01/projects-for-2010/'>Projects for 2010</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Jan 2nd, 2010</p>
  </header>

<p>Hurrah, 2010 is upon us!</p>

<p>One new years resolution I have set for myself is to blog more about what I&#8217;m working on. I&#8217;ve learned over the last year that the audience of people who care about your projects <em>in development</em> is vanishingly small. Thus, the need for secrecy in order to make a &#8220;PR splash&#8221; is rather small&#8211; announce far and wide when you have something that <a href="http://hbus.ca">people can use</a> by all means, but don&#8217;t worry too much about talking about what you&#8217;re working on with the internets.</p>

<p>In this spirit, some projects I&#8217;m 99% certain I&#8217;ll be releasing publicly in 2010:</p>

<ul>
 <li><strong><a href="http://github.com/wlach/neocoder">neocoder</a></strong> A lightweight geocoding library, with wrapper libraries for your language of choice. Written in C++ using <a href="http://sqlite.org">SQLite</a> and boost regular expressions. Will support both <a href="http://openstreetmap.org">OpenStreetMap</a> and <a href="http://geobase.ca">GeoBase</a> GML as input. Currently in development on github, hoping to release with routez (as its geocoding component).</li>
 <li><strong>routez</strong> A generic travel planning web service, written in python using the <a href="http://django-project.org">django</a> framework and the <a href="http://github.com/wlach/libroutez">libroutez</a> libraries. This is basically the software behind <a href="http://hbus.ca">hbus.ca</a>&#8230; the goal for 2010 is to clean it up and make it generic by clearing out the Halifax-specific stuff (mostly just the geocoding and site theme stuff at this point), then release it to the public under the <a href="www.affero.org/oagpl.html">Affero GPL License</a> (was originally going to with GPL, but <a href="http://sfllaw.ca">Simon Law</a> convinced me otherwise&#8230; more on that in a future post).</li>
 <li><strong>Transit To Go</strong> A dedicated iPhone client for the routez software, developed in collaboration with <a href="http://appliedlogic.ca">Dmitri Dolguikh</a> and <a href="http://mindsea.com">Bill Wilson</a>, two talent developers from Halifax. Has some innovative (in my opinion, anyway) details on how things will be viewed. This one&#8217;s going to be proprietary, but will be affordable and awesome.</li></ul>

<p>Besides this, I have a few more irons in the fire&#8230; however, I&#8217;m hesistant to talk about them just yet. Just getting the above done in the midst of my work with <a href="http://navarra.ca">Navarra</a> (to say nothing of having a life in there somewhere) is going to be challenging.</p>

<p>Thoughts? Would be particularly interested in hearing from people working on similar projects to neocoder and routez. Despite how it may some times appear, I don&#8217;t have a NotInventedHere mentality: I&#8217;ve done as an exhaustive survey of the field as I could before deciding to work on my own projects, and what I&#8217;ve found just hasn&#8217;t been the right fit for what I&#8217;m trying to accomplish. However, the world&#8217;s gotten so damn big that I&#8217;m not sure if I&#8217;m missing something&#8230;</p>

</article>

<article>
  <header>
    <p><span class="tags"><a href="/tags/hbus.html">hbus</a></span></p>
    <h2><a href='/blog/2009/04/creating-a-google-transit-feed-for-fun-and-profit/'>Creating a google transit feed for fun and profit</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Apr 23rd, 2009</p>
  </header>

<p>People frequently ask me how I manage to collect and input the data that is used by hbus.ca, given Metro Transit&#8217;s intransigence. The &#8220;bike and GPS&#8221; angle is well known <a href="http://www.thecoast.ca/halifax/beta-the-public-transit-day-tripper/Content?oid=1098826">by now</a>, but what about the rest of the process? How do I get the data into a format that hbus.ca can consume?</p>

<p>The defacto standard for the interchange of transit information is <a href="http://code.google.com/p/googletransitdatafeed">Google Transit Feed</a> (GTFS). This exceedingly simple comma seperated value format is now supported by a plethora of software, including <a href="http://google.com/transit">Google Transit</a>, <a href="http://github.com/bmander/graphserver">graphserver</a>, as well as my very own <a href="http://github.com/wlach/libroutez">libroutez</a> (used by hbus.ca). It was obvious to me right from the beginning that the first step to building hbus.ca would be to create one of these feeds.</p>

<p>Manipulating a GTFS by hand is probably not a great idea. It&#8217;s basically a dump of a relational database, and is pretty inscrutable from the point of view of a human being. What I really want to be able to do is be able
 <br />to manipulate things on the level of stops, service periods, and routes&#8211; and let some kind of abstraction layer take care of the low-level details. Fortunately, the awesome engineers at google created a python library called <a href="http://code.google.com/p/googletransitdatafeed">Google Transit Data Feed</a>, which can help with creating one of these things by providing abstractions of the key elements of a google transit feed (stops, service periods, etc.). You can then write a program which uses these abstractions to create and save a GTFS.</p>

<p>Of course, providing the library appropriate information is easier said than done. Metro Transit&#8217;s PDF schedules are not readily computer parsable (being designed to be printed out, after all). I needed some kind of semi-automated way of converting a Metro Transit schedule into GTFS, or this whole project was
 <br />going nowhere fast.</p>

<p>As an initial step, it turns out that it&#8217;s quite possible to extract textual information from a PDF using the open source <a href="http://poppler.freedesktop.org/">popplar</a> library. From there, it&#8217;s possible to extract the stopping times for an individual bus route. Let&#8217;s give an example. For example, let&#8217;s take the case of adding the 60 (Portland Hill&#8217;s route), something I&#8217;m currently working on. All I had to do was download the PDF file from Metro Transit&#8217;s site and then run the following on the command line:
 <br /><code>&lt;br /&gt;
pdftotext -raw route60.pdf&lt;br /&gt;</code>
 <br />The raw option basically makes sure the raw strings are dumped to disk, and that no attempt is made to preserve formatting. The result is a text file with content like this in it:
 <br /><code>&lt;br /&gt;
842a 847a 855a 858a 903a 906a 912a -&lt;br /&gt;
857a 902a 910a 913a 918a 921a - 925a&lt;br /&gt;
910a 915a 923a 926a 931a 934a 940a -&lt;br /&gt;
940a 945a 953a - 1000a 1003a 1009a -&lt;br /&gt;
...and every 30 minutes until&lt;br /&gt;
210p 215p 223p - 230p 233p 239p -&lt;br /&gt;</code>
 <br />This type of format can be parsed easily enough. To create a proper transit feed though, schedule information isn&#8217;t enough: you also need to know the locations of the stops, names of routes, etc. After some deliberation, I came to the determination that I needed some kind of intermediate format to store the above schedule information and this additional information. It would be readable both by humans (to ease its creation) and machines.</p>

<p>The obvious markup for something like this is <a href="http://yaml.org">YAML</a> (if you&#8217;re still using XML to store structured information, run, don&#8217;t walk, and look at YAML: you can thank me later). Simple, clean, effective. GTFS is still the better choice for using the information in another application as its representation is much more amenable to being stored in a graph. Here&#8217;s a few examples of my YAML format in action:</p>

<p><a href="http://github.com/wlach/halifax-transit-feed/blob/fef68c18928272670b3c57ae5530260deed85883/7-robie-to-gottingen.yml">7 (Robie to Gottingen)</a>
 <br /><a href="http://github.com/wlach/halifax-transit-feed/blob/fef68c18928272670b3c57ae5530260deed85883/10-to-westphal.yml">10 (Westphal)</a></p>

<p>Besides the scheduling information, the other main interesting component of a GTFS is the location of the stops. As anyone who&#8217;s used a Metro Transit schedule has noticed, only major timepoints are covered in the PDF schedules. What of all the stops in between? This is where the bike and GPS come in.</p>

<p>What I did was take a standard GPS from Mountain Equipment Co-op (The Garmin GPSMap 60x), get on my bike, take the readings of individual gotime numbers and positioning information, of the individual stops between the major timepoints. I then took this device back to my computer and, using a utility called <a href="http://gpsbabel.org">GPSBabel</a>, dumped out the stop information in a format called &#8220;comma seperated value&#8221;. It looks like this:
 <br /><code>&lt;br /&gt;
44.65825, -63.59252, 6785-21-31-33-34-35-3-7&lt;br /&gt;
44.65982, -63.59452, 6768-21-31-33-35-86-3-7&lt;br /&gt;
44.66113, -63.59659, 6782-21-31-33-34-35-3-7&lt;br /&gt;</code>
 <br />The first two items are latitude and longitude, providing the positioning of the stop. The last item is a gotime number, followed by the set of buses which pass by the stop. Turning this into YAML is a matter of applying
 <br />the following regular expression to the input:
 <br /><code>&lt;br /&gt;
\([0-9]+.[0-9]+\), \(-63.[0-9]+\), \([0-9]+\)- -&gt; - { name: xxx, stop_code: \3, lat: \1, lng: \2 }&lt;br /&gt;</code>
 <br />To get an actual name for the stop (i.e.: &#8220;Gottingen and Young&#8221;), I wrote a simple script which finds the nearest intersection close to the stop in the <a href="http://geobase.ca">GeoBase</a> dataset. I then (at my discretion) corrected it based on my on-the-street knowledge of the layout of Halifax as well as adding certain details to help the user (e.g. bus stops on the way to the south end of Halifax are marked &#8220;south bound&#8221;).</p>

<p>With these two elements in place (a format for creating human-readable transit information and a library for creating GTFS), the only thing left to do is create a program which bridges the gap. Behold, the magic of
 <br /><a href="http://github.com/wlach/halifax-transit-feed/blob/fef68c18928272670b3c57ae5530260deed85883/createfeed.py">createfeed.py</a>. With all of this in place, creating a google transit feed for Halifax is a simple matter of typing &#8220;make&#8221;.</p>

<p>Is this a ridiculous amount of work? I wouldn&#8217;t say so. The vast, vast majority of my work on hbus.ca has been in creating the pathfinding code and geocoding functionality. This is work that can be translated to many different municipalities, and can easily be extended and made more useful in a myriad of ways.</p>

<p>What does seem a little intimidating to me is completing what I started. Capturing bus stop information for the Halifax peninsula is one thing, but covering the outlying areas (Bayer&#8217;s Lake, Sackville, etc.) is quite
 <br />another. There&#8217;s a lot of biking involved there, more perhaps than what one person can reasonably be expected to do. It was my hope that the initial release of hbus would validate the model of community-developed transit software to Metro Transit and they would see the benefit of releasing their internal copy of this data to the public, but unfortunately that doesn&#8217;t seem to have happened.</p>

<p>Getting that problem solved seems to be more a political problem than a technical one, and it&#8217;s not my specialty. It really does make me wonder if I shouldn&#8217;t reconsider the option of crowd sourcing, which I had
 <br /><a href="http://wrla.ch/blog/2009/03/hbusca-and-thoughts-about-crowdsourcing/">rejected</a> earlier.</p>

</article>

<article>
  <header>
    <p><span class="tags"><a href="/tags/hbus.html">hbus</a></span></p>
    <h2><a href='/blog/2009/03/hbus-ca-and-thoughts-about-crowdsourcing/'>hbus.ca and thoughts about crowdsourcing</a></h2>
    <p class='index-date'><span class="glyphicon glyphicon-time" aria-hidden="true"></span> Mar 25th, 2009</p>
  </header>

<figure id="attachment_18" style="width: 410px" class="wp-caption alignleft"><img src="/files/2009/03/hbus_mini.png" alt="hbus in action" title="hbus_mini" width="410" height="409" class="size-full wp-image-18" />
 <figcaption class="wp-caption-text">hbus in action</figcaption></figure>

<p>So I opened up my baby, <a href="http://hbus.ca" title="hbus.ca">hbus.ca</a>, to the public last week (though traffic only really started to pick up yesterday, after a <a href="http://www.metronews.ca/halifax/local/article/201622">positive article</a> in the daily news). This site, a trip planner for the Halifax Regional Municipality, was the cumulation of about 6 months of part time work on my part, between contracts for my awesome company, <a href="http://navarra.ca">Navarra</a>.</p>

<p>I&#8217;m debating on whether or not to start a seperate blog for hbus. At the moment I&#8217;m leaning towards no: my thinking is that most people don&#8217;t care about the inner workings of a site like hbus. They just want to figure out how to get from point A to B. Those who do care can read the rest of what I (and my part time co-conspirator, <a href="http://cpirate.livejournal.com">Peter McCurdy</a>) have to say.</p>

<p>The most glaring limitation in hbus right now is that its route coverage is woefully limited. Trips on the main Halifax peninsula are generally planned pretty effectively. If you&#8217;re travelling to a suburban area like Bayer&#8217;s Lake or Burnside, not so much (unless you&#8217;re lucky enough to be starting/ending near a bus timepoint). What is to be done?</p>

<p>A frequent suggestion I get from more technically minded folks is that I should &#8220;crowd source&#8221; the missing information. This basically implies creating a wikipedia-like architecture such that people could contribute their favourite stops, routes, etc.</p>

<p>It&#8217;s a tempting idea. Such sites as <a href="http://openstreetmap.org">OpenStreetMap</a> show that this approach can be very effective for gathering large amount of geographical data. I&#8217;m frankly not convinced it&#8217;s the right approach here though. The fact is that <a href="http://halifax.ca/metrotransit">Metro Transit</a> MUST have a complete set of stops, route schedules, and route plans internally. There&#8217;s no way they could plan their operations halfway effectively otherwise. Why should I burden the public with the task of recreating something which has already been done?</p>

<p>I may be crazy, but I think the best avenue for the moment is to try to convince Metro Transit that it would be worthwhile to make this information public. I paid for the generation of the information with my tax dollars, why shouldn&#8217;t I be able to make use of it? The preferred format for this information is <a href="http://code.google.com/p/googletransitdatafeed/">Google Transit Data Feed</a>, but I could make use of information in just about any representation (Arc GIS, etc.). Just give me what you have, and I&#8217;ll take of the rest. <a href="http://code.google.com/p/googletransitdatafeed/wiki/PublicFeeds">Over 20</a> of the most successful transit agencies in North America (many of them much bigger than Metro Transit) have opened up their information to the public, with only positive results.</p>

<p>The most obvious use of this information is a trip planner and, yes, I know every agency and their dog has (or will have) one of these. But maybe someone has a cool idea on how to make a trip planner easier to use (compare <a href="http://hbus.ca">hbus.ca</a> with <a href="www.stm.info/azimuts/index.htm">Tous Azimuts</a>). Or what about <a href="http://www.walkscore.com/transit-map.php">transit maps</a> that help people figure out where to live? Or iPhone and Blackberry applications? Or cool <a href="http://myttc.ca/screensaver">screensavers</a>? Or or or. The possibilities are truly endless once the data is out there. Come on Metro Transit, you have nothing to lose and the eternal love of your ridership to gain.</p>

</article>

        </div>
      </div>
      <footer>
        <p>Site generated by <a href="https://github.com/greghendershott/frog">Frog</a>,
          using <a href="https://getbootstrap.com">Bootstrap</a>.</p>
        <p>Post content is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
      </footer>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="//code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  </body>
</html>