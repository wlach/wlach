<?xml version="1.0" encoding="utf-8"?> 
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
 <title type="text">William Lachance's Log: Posts tagged 'mozregression'</title>
 <link rel="self" href="https://wlach.github.io/feeds/mozregression.atom.xml" />
 <link href="https://wlach.github.io/tags/mozregression.html" />
 <id>urn:https-wlach-github-io:-tags-mozregression-html</id>
 <updated>2020-06-29T20:39:06Z</updated>
 <entry>
  <title type="text">mozregression GUI: now available for Linux</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2020/06/mozregression-gui-now-available-for-linux/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2020-06-mozregression-gui-now-available-for-linux</id>
  <published>2020-06-29T20:39:06Z</published>
  <updated>2020-06-29T20:39:06Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;Thanks to &lt;a href="https://github.com/AnAverageHuman"&gt;@AnAverageHuman&lt;/a&gt;, &lt;a href="https://mozilla.github.io/mozregression"&gt;mozregression&lt;/a&gt; once again has an easy to use and install GUI version for Linux! This used to work a few years ago, but got broken with some changes in the mozregression-python2 era and didn&amp;rsquo;t get resolved until now:&lt;/p&gt;

&lt;div class="figure"&gt;&lt;img src="/files/2020/06/mozregression-on-linux.png" alt="" /&gt;
 &lt;p class="caption"&gt;&lt;/p&gt;&lt;/div&gt;

&lt;p&gt;This is an area where using telemetry in mozregression can help us measure the impact of a change like this: although Windows still dominates in terms of marketshare, Linux is very widely used by contributors &amp;mdash; of the usage of mozregression in the past 2 months, fully 30% of the sessions were on Linux (and it is possible we were undercounting that due to &lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1646402"&gt;bug 1646402&lt;/a&gt;):&lt;/p&gt;

&lt;div class="figure"&gt;&lt;img src="/files/2020/06/mozregression-usage-share-by-os.png" alt="" /&gt;
 &lt;p class="caption"&gt;&lt;/p&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href="https://sql.telemetry.mozilla.org/queries/72363/source"&gt;link to query&lt;/a&gt; (internal-only)&lt;/p&gt;

&lt;p&gt;It will be interesting to watch the usage numbers for Linux evolve over the next few months. In particular, I&amp;rsquo;m curious to see what percentage of users on that platform prefer a GUI.&lt;/p&gt;

&lt;h2 id="appendix-reducing-mozregression-guis-massive-size"&gt;Appendix: reducing mozregression-GUI&amp;rsquo;s massive size&lt;/h2&gt;

&lt;p&gt;One thing that&amp;rsquo;s bothered me a bunch lately is that the mozregression GUI&amp;rsquo;s size is &lt;em&gt;massive&lt;/em&gt; and this is even more apparent on Linux, where the initial distribution of the GUI came in at over 120 megabytes! Why so big? There were a few reasons:&lt;/p&gt;

&lt;ol&gt;
 &lt;li&gt;&lt;a href="https://pypi.org/project/PySide2/"&gt;PySide2&lt;/a&gt; (the GUI library we use) is very large (10s of megabytes), and &lt;a href="https://www.pyinstaller.org/"&gt;PyInstaller&lt;/a&gt; packages &lt;em&gt;all of it&lt;/em&gt; by default into your application distribution.&lt;/li&gt;
 &lt;li&gt;The binary/rust portions of the &lt;a href="https://pypi.org/project/glean-sdk/"&gt;Glean Python SDK&lt;/a&gt; were been built with debugging information included (basically as a carry-over when it was a pre-alpha product), which made it 38 megabytes big (!) on Linux.&lt;/li&gt;
 &lt;li&gt;On Linux at least, a large number of other system libraries are packaged into the distribution.&lt;/li&gt;&lt;/ol&gt;

&lt;p&gt;A few aspects of this were under our control: Ian Moody (:Kwan) and myself crafted a script to manually remove unneeded PySide2 libraries as part of the packaging process. The Glean team was awesome-as-always and quickly rebuilt Glean without debugging information (this was basically an oversight). Finally, I managed to shave off a few more megabytes by reverting the Linux build to an earlier version of Ubuntu (Xenial), which is something I had been meaning to do anyway.&lt;/p&gt;

&lt;p&gt;Even after doing all of these things, the end result is still a little underwhelming: the mozregression GUI distribution on Linux is still 79.5 megabytes big. There are probably other things we could do, but we&amp;rsquo;re definitely entering the land of diminishing returns.&lt;/p&gt;

&lt;p&gt;Honestly, my main takeaway is just not to build an application like this in Python unless you absolutely have to (e.g. you&amp;rsquo;re building an application which needs system-level access). The web is a pretty wonderful medium for creating graphical applications these days, and by using it you sidestep these type of installation issues.&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">This Week in Glean: mozregression telemetry (part 2)</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2020/05/this-week-in-glean-mozregression-telemetry-part-2/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2020-05-this-week-in-glean-mozregression-telemetry-part-2</id>
  <published>2020-05-08T14:32:40Z</published>
  <updated>2020-05-08T14:32:40Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;&lt;em&gt;(“This Week in Glean” is a series of blog posts that the Glean Team at Mozilla is using to try to communicate better about our work. They could be release notes, documentation, hopes, dreams, or whatever: so long as it is inspired by Glean. You can find &lt;a href="https://mozilla.github.io/glean/book/appendix/twig.html"&gt;an index of all TWiG posts online.&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;This is a special guest post by non-Glean-team member William Lachance!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;This is a continuation of an exploration of adding Glean-based telemetry to a python application, in this case &lt;a href="https://mozilla.github.io/mozregression"&gt;mozregression&lt;/a&gt;, a tool for automatically finding the source of Firefox regressions (breakage).&lt;/p&gt;

&lt;p&gt;When we left off &lt;a href="/blog/2020/02/this-week-in-glean-special-guest-post-mozregression-telemetry-part-1/"&gt;last time&lt;/a&gt;, we had written some test scripts and verified that the data was visible in the debug viewer.&lt;/p&gt;

&lt;h2 id="adding-telemetry-to-mozregression-itself"&gt;Adding Telemetry to mozregression itself&lt;/h2&gt;

&lt;p&gt;In many ways, this is pretty similar to what I did inside the sample application: the only significant difference is that these are shipped inside a Python application that is meant to be be installable via &lt;a href="https://pypi.org/project/pip/"&gt;pip&lt;/a&gt;. This means we need to specify the &lt;code&gt;pings.yaml&lt;/code&gt; and &lt;code&gt;metrics.yaml&lt;/code&gt; (located inside the &lt;code&gt;mozregression&lt;/code&gt; subirectory) as package data inside &lt;code&gt;setup.py&lt;/code&gt;:&lt;/p&gt;

&lt;div class="brush: py"&gt;
 &lt;div class="colorful"&gt;
  &lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"mozregression"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="n"&gt;package_data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;"mozregression"&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;"*.yaml"&lt;/span&gt;&lt;span class="p"&gt;]},&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;p&gt;There were also a number of Glean SDK enhancements which we determined were necessary. Most notably, Michael Droettboom added 32-bit Windows wheels to the Glean SDK, which we need to make building the &lt;a href="https://mozilla.github.io/mozregression/quickstart.html#gui"&gt;mozregression GUI&lt;/a&gt; on Windows possible. In addition, some minor changes needed to be made to Glean&amp;rsquo;s behaviour for it to work correctly with a command-line tool like mozregression &amp;mdash; for example, Glean used to assume that Telemetry would always be disabled via a GUI action so that it would send a deletion ping, but this would obviously not work in an application like mozregression where there is only a configuration file &amp;mdash; so for this case, Glean needed to be modified to check if it had been disabled &lt;em&gt;between&lt;/em&gt; runs.&lt;/p&gt;

&lt;p&gt;Many thanks to Mike (and others on the Glean team) for so patiently listening to my concerns and modifying Glean accordingly.&lt;/p&gt;

&lt;h2 id="getting-data-review"&gt;Getting Data Review&lt;/h2&gt;

&lt;p&gt;At Mozilla, we don&amp;rsquo;t just allow random engineers like myself to start collecting data in a product that we ship (even a semi-internal like mozregression). We have &lt;a href="https://wiki.mozilla.org/Firefox/Data_Collection"&gt;a process&lt;/a&gt;, overseen by Data Stewards to make sure the information we gather is actually answering important questions and doesn&amp;rsquo;t unnecessarily collect personally identifiable information (e.g. email addresses).&lt;/p&gt;

&lt;p&gt;You can see the specifics of how this worked out in the case of mozregression in &lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581647#c9"&gt;bug 1581647&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="documentation"&gt;Documentation&lt;/h2&gt;

&lt;p&gt;Glean has some fantastic utilities for generating markdown-based documentation on what information is being collected, which I have made available on GitHub:&lt;/p&gt;

&lt;p&gt;&lt;a href="https://github.com/mozilla/mozregression/blob/master/docs/glean/metrics.md"&gt;https://github.com/mozilla/mozregression/blob/master/docs/glean/metrics.md&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The generation of this documentation is &lt;a href="https://github.com/mozilla/mozregression/blob/3454e1eafe83f53a84cb6b10f46649320d5ed097/.travis.yml#L57"&gt;hooked up to mozregression&amp;rsquo;s continuous integration&lt;/a&gt;, so we can sure it&amp;rsquo;s up to date.&lt;/p&gt;

&lt;p&gt;I also added &lt;a href="https://mozilla.github.io/mozregression/documentation/telemetry.html"&gt;a quick note&lt;/a&gt; to mozregression&amp;rsquo;s web site describing the feature, along with (very importantly) instructions on how to turn it off.&lt;/p&gt;

&lt;h2 id="enabling-data-ingestion"&gt;Enabling Data Ingestion&lt;/h2&gt;

&lt;p&gt;Once a Glean-based project has passed data review, getting our infrastructure to ingest it is pretty straightforward. Normally &lt;a href="https://mozilla.github.io/glean/book/user/adding-glean-to-your-project.html#adding-metadata-about-your-project-to-the-pipeline"&gt;we would suggest just filing a bug&lt;/a&gt; and let us (the data team) handle the details, but since I&amp;rsquo;m &lt;em&gt;on&lt;/em&gt; that team, I&amp;rsquo;m going to go a (little bit) of detail into how the sausage is made.&lt;/p&gt;

&lt;p&gt;Behind the scenes, we have a collection of ETL (extract-transform-load) scripts in the &lt;a href="https://github.com/mozilla/probe-scraper/"&gt;probe-scraper repository&lt;/a&gt; which are responsible for parsing the ping and probe metadata files that I added to mozregression in the step above and then automatically creating BigQuery tables and updating our ingestion machinery to insert data passed to us there.&lt;/p&gt;

&lt;p&gt;There&amp;rsquo;s quite a bit of complicated machinery being the scenes to make this all work, but since it&amp;rsquo;s already in place, adding a new thing like this is relatively simple. The changeset I submitted as part of a &lt;a href="https://github.com/mozilla/probe-scraper/pull/184"&gt;pull request&lt;/a&gt; to probe-scraper was all of 9 lines long:&lt;/p&gt;

&lt;div class="brush: diff"&gt;
 &lt;div class="colorful"&gt;
  &lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/repositories.yaml b/repositories.yaml&lt;/span&gt;
&lt;span class="gh"&gt;index dffcccf..6212e55 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/repositories.yaml&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/repositories.yaml&lt;/span&gt;
&lt;span class="gu"&gt;@@ -239,3 +239,12 @@ firefox-android-release:&lt;/span&gt;
     - org.mozilla.components:browser-engine-gecko-beta
     - org.mozilla.appservices:logins
     - org.mozilla.components:support-migration
&lt;span class="gi"&gt;+mozregression:&lt;/span&gt;
&lt;span class="gi"&gt;+  app_id: org-mozilla-mozregression&lt;/span&gt;
&lt;span class="gi"&gt;+  notification_emails:&lt;/span&gt;
&lt;span class="gi"&gt;+    - wlachance@mozilla.com&lt;/span&gt;
&lt;span class="gi"&gt;+  url: &amp;#39;https://github.com/mozilla/mozregression&amp;#39;&lt;/span&gt;
&lt;span class="gi"&gt;+  metrics_files:&lt;/span&gt;
&lt;span class="gi"&gt;+    - &amp;#39;mozregression/metrics.yaml&amp;#39;&lt;/span&gt;
&lt;span class="gi"&gt;+  ping_files:&lt;/span&gt;
&lt;span class="gi"&gt;+    - &amp;#39;mozregression/pings.yaml&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;h2 id="a-pretty-graph"&gt;A Pretty Graph&lt;/h2&gt;

&lt;p&gt;With the probe scraper change merged and deployed, we can now start querying! A number of tables are automatically created according to the schema outlined above: notably &amp;ldquo;live&amp;rdquo; and &amp;ldquo;stable&amp;rdquo; tables corresponding to the usage ping. Using &lt;a href="https://docs.telemetry.mozilla.org/tools/stmo.html"&gt;sql.telemetry.mozilla.org&lt;/a&gt; we can start exploring what&amp;rsquo;s out there. Here&amp;rsquo;s a quick query I wrote up:&lt;/p&gt;

&lt;div class="brush: sql"&gt;
 &lt;div class="colorful"&gt;
  &lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="nb"&gt;DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;submission_timestamp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
       &lt;span class="n"&gt;metrics&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;usage_variant&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt; &lt;span class="n"&gt;variant&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
       &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="o"&gt;`&lt;/span&gt;&lt;span class="n"&gt;moz&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;fx&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;data&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;shared&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prod&lt;/span&gt;&lt;span class="o"&gt;`&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org_mozilla_mozregression_stable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;usage_v1&lt;/span&gt;
&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="nb"&gt;DATE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;submission_timestamp&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;2020-04-14&amp;#39;&lt;/span&gt;
  &lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="n"&gt;client_info&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;app_display_version&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;LIKE&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%.dev%&amp;#39;&lt;/span&gt;
&lt;span class="k"&gt;GROUP&lt;/span&gt; &lt;span class="k"&gt;BY&lt;/span&gt; &lt;span class="nb"&gt;date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;variant&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;p&gt;&amp;hellip; which generates a chart like this:&lt;/p&gt;

&lt;div class="figure"&gt;&lt;img src="/files/2020/05/mozregression-variant-usage.png" alt="" /&gt;
 &lt;p class="caption"&gt;&lt;/p&gt;&lt;/div&gt;

&lt;p&gt;This chart represents the absolute volume of mozregression usage since April 14th 2020 (around the time when we first released a version of mozregression with Glean telemetry), grouped by mozregression &amp;ldquo;variant&amp;rdquo; (GUI, console, and mach) and date - you can see that (unsurprisingly?) the GUI has the highest usage. I&amp;rsquo;ll talk about this more in an upcoming installment, speaking of&amp;hellip;&lt;/p&gt;

&lt;h2 id="next-steps"&gt;Next Steps&lt;/h2&gt;

&lt;p&gt;We&amp;rsquo;re not done yet! Next time, we&amp;rsquo;ll look into making a public-facing dashboard demonstrating these results and making an aggregated version of the mozregression telemetry data publicly accessible to researchers and the general public. If we&amp;rsquo;re lucky, there might even be a bit of &lt;em&gt;data science&lt;/em&gt;. Stay tuned!&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">mozregression for MacOS</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2020/04/mozregression-for-macos/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2020-04-mozregression-for-macos</id>
  <published>2020-04-24T14:59:04Z</published>
  <updated>2020-04-24T14:59:04Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;Just a quick note that, as a side-effect of the work I mentioned a while ago to &lt;a href="/blog/2020/02/this-week-in-glean-special-guest-post-mozregression-telemetry-part-1/"&gt;add telemetry to mozregression&lt;/a&gt;, mozregression now has a graphical Mac client! It&amp;rsquo;s a bit of a pain to install (since it&amp;rsquo;s unsigned), but likely worlds easier for the average person to get going than the command-line version. Please feel free to &lt;a href="https://mozilla.github.io/mozregression/install.html"&gt;point people to it&lt;/a&gt; if you&amp;rsquo;re looking to get a regression range for a MacOS-specific problem with Firefox.&lt;/p&gt;

&lt;center&gt;&lt;img style="width:600px" src="/files/2020/04/mozregression-gui-mac.png" /&gt;&lt;/center&gt;

&lt;p&gt;More details: The &lt;a href="https://mozilla.github.io/glean/book/dev/python/index.html"&gt;Glean Python SDK&lt;/a&gt;, which &lt;a href="https://mozilla.github.io/mozregression/documentation/telemetry.html"&gt;mozregression now uses for telemetry&lt;/a&gt;, requires Python 3. This provided the impetus to port the GUI itself to Python 3 and PySide2 (the modern incarnation of PyQt), which brought with it a much easier installation/development experience for the GUI on platforms like Mac and Linux.&lt;/p&gt;

&lt;p&gt;I haven&amp;rsquo;t gotten around to producing GUI binaries for the Linux yet, but it should not be much work.&lt;/p&gt;

&lt;p&gt;Speaking of Glean, mozregression, and Telemetry, stay tuned for more updates on that soon. It&amp;rsquo;s been an adventure!&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">This week in Glean (special guest post): mozregression telemetry (part 1)</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2020/02/this-week-in-glean-special-guest-post-mozregression-telemetry-part-1/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2020-02-this-week-in-glean-special-guest-post-mozregression-telemetry-part-1</id>
  <published>2020-02-28T15:50:58Z</published>
  <updated>2020-02-28T15:50:58Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;&lt;em&gt;(“This Week in Glean” is a series of blog posts that the Glean Team at Mozilla is using to try to communicate better about our work. They could be release notes, documentation, hopes, dreams, or whatever: so long as it is inspired by Glean. You can find &lt;a href="https://mozilla.github.io/glean/book/appendix/twig.html"&gt;an index of all TWiG posts online.&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;This is a special guest post by non-Glean-team member William Lachance!&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;As I &lt;a href="/blog/2019/09/mozregression-update-python-3-edition/"&gt;mentioned last time&lt;/a&gt; I talked about &lt;a href="https://mozilla.github.io/mozregression/"&gt;mozregression&lt;/a&gt;, I have been thinking about adding some telemetry to the system to better understand the usage of this tool, to justify some part of Mozilla spending some cycles maintaining and improving it (assuming my intuition that this tool is heavily used is confirmed).&lt;/p&gt;

&lt;p&gt;Coincidentally, the Telemetry client team has been working on a new library for measuring these types of things in a principled way called &lt;a href="https://mozilla.github.io/glean/book/index.html"&gt;Glean&lt;/a&gt;, which even has python bindings! Using this has the potential in saving a lot of work: not only does Glean provide a framework for submitting data, our backend systems are automatically set up to process data submitted via into Glean into &lt;a href="https://cloud.google.com/bigquery"&gt;BigQuery&lt;/a&gt; tables, which can then easily be queried using tools like &lt;a href="https://docs.telemetry.mozilla.org/tools/stmo.html"&gt;sql.telemetry.mozilla.org&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I thought it might be useful to go through some of what I&amp;rsquo;ve been exploring, in case others at Mozilla are interested in instrumenting their pet internal tools or projects. If this effort is successful, I&amp;rsquo;ll distill these notes into a tutorial in the Glean documentation.&lt;/p&gt;

&lt;h2 id="initial-steps-defining-pings-and-metrics"&gt;Initial steps: defining pings and metrics&lt;/h2&gt;

&lt;p&gt;The initial step in setting up a Glean project of any type is to define explicitly the types of pings and metrics. You can look at a &amp;ldquo;ping&amp;rdquo; as being a small bucket of data submitted by a piece of software in the field. A &amp;ldquo;metric&amp;rdquo; is something we&amp;rsquo;re measuring and including in a ping.&lt;/p&gt;

&lt;p&gt;Most of the Glean documentation focuses on browser-based use-cases where we might want to sample lots of different things on an ongoing basis, but for mozregression our needs are considerably simpler: we just want to know when someone &lt;em&gt;has&lt;/em&gt; used it along with a small number of non-personally identifiable characteristics of their usage, e.g. the mozregression version number and the name of the application they are bisecting.&lt;/p&gt;

&lt;p&gt;Glean has &lt;a href="https://mozilla.github.io/glean/book/user/pings/events.html"&gt;the concept of event pings&lt;/a&gt;, but it seems like those are there more for a fine-grained view of what&amp;rsquo;s going on during an application&amp;rsquo;s use. So let&amp;rsquo;s define a new ping just for ourselves, giving it the unimaginative name &amp;ldquo;usage&amp;rdquo;. This goes in a file called &lt;code&gt;pings.yaml&lt;/code&gt;:&lt;/p&gt;

&lt;div class="brush: yaml"&gt;
 &lt;div class="colorful"&gt;
  &lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;$schema&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;moz://mozilla.org/schemas/glean/pings/1-0-0&lt;/span&gt;

&lt;span class="nt"&gt;usage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;description&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="no"&gt;A ping to record usage of mozregression&lt;/span&gt;
  &lt;span class="nt"&gt;include_client_id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;true&lt;/span&gt;
  &lt;span class="nt"&gt;notification_emails&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;wlachance@mozilla.com&lt;/span&gt;
  &lt;span class="nt"&gt;bugs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;http://bugzilla.mozilla.org/123456789/&lt;/span&gt;
  &lt;span class="nt"&gt;data_reviews&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;http://example.com/path/to/data-review&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;p&gt;We also need to define a list of things we want to measure. To start with, let&amp;rsquo;s just test with one piece of sample information: the app we&amp;rsquo;re bisecting (e.g. &amp;ldquo;Firefox&amp;rdquo; or &amp;ldquo;Gecko View Example&amp;rdquo;). This goes in a file called &lt;code&gt;metrics.yaml&lt;/code&gt;:&lt;/p&gt;

&lt;div class="brush: yaml"&gt;
 &lt;div class="colorful"&gt;
  &lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nn"&gt;---&lt;/span&gt;
&lt;span class="nt"&gt;$schema&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;moz://mozilla.org/schemas/glean/metrics/1-0-0&lt;/span&gt;

&lt;span class="nt"&gt;usage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="nt"&gt;app&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="nt"&gt;type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;string&lt;/span&gt;
    &lt;span class="nt"&gt;description&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p p-Indicator"&gt;&amp;gt;&lt;/span&gt;
      &lt;span class="no"&gt;The name of the app being bisected&lt;/span&gt;
    &lt;span class="nt"&gt;notification_emails&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; 
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;wlachance@mozilla.com&lt;/span&gt;
    &lt;span class="nt"&gt;bugs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; 
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;https://bugzilla.mozilla.org/show_bug.cgi?id=1581647&lt;/span&gt;
    &lt;span class="nt"&gt;data_reviews&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; 
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;http://example.com/path/to/data-review&lt;/span&gt;
    &lt;span class="nt"&gt;expires&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;never&lt;/span&gt;
    &lt;span class="nt"&gt;send_in_pings&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="p p-Indicator"&gt;-&lt;/span&gt; &lt;span class="l l-Scalar l-Scalar-Plain"&gt;usage&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;p&gt;The &lt;code&gt;data_reviews&lt;/code&gt; sections in both of the above are obviously bogus, we will need to actually get data review before landing and using this code, to make sure that we&amp;rsquo;re in conformance with Mozilla&amp;rsquo;s &lt;a href="https://wiki.mozilla.org/Firefox/Data_Collection"&gt;data collection policies&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id="testing-it-out"&gt;Testing it out&lt;/h2&gt;

&lt;p&gt;But in the mean time, we can test our setup with the &lt;a href="https://docs.telemetry.mozilla.org/concepts/glean/debug_ping_view.html"&gt;Glean debug pings viewer&lt;/a&gt; by setting a special tag (&lt;code&gt;mozregression-test-tag&lt;/code&gt;) on our output. Here&amp;rsquo;s a small python script which does just that:&lt;/p&gt;

&lt;div class="brush: py"&gt;
 &lt;div class="colorful"&gt;
  &lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;glean&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Glean&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Configuration&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;glean&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;load_metrics&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                   &lt;span class="n"&gt;load_pings&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;mozregression_path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;.mozilla2&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;mozregression&amp;#39;&lt;/span&gt;

&lt;span class="n"&gt;Glean&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;initialize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
    &lt;span class="n"&gt;application_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"mozregression"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;application_version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"0.1.1"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;upload_enabled&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;configuration&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Configuration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
      &lt;span class="n"&gt;ping_tag&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;"mozregression-test-tag"&lt;/span&gt;
    &lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;data_dir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;mozregression_path&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s2"&gt;"data"&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Glean&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_upload_enabled&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;pings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;load_pings&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"pings.yaml"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;metrics&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;load_metrics&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"metrics.yaml"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;metrics&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;usage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"reality"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;pings&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;usage&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;submit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;

&lt;p&gt;Running this script on my laptop, I see that a respectable JSON payload was delivered to and processed by our servers:&lt;/p&gt;

&lt;p&gt;&lt;img style="width:600px" src="/files/2020/02/glean-debug-ping-viewer.png" /&gt;&lt;/p&gt;

&lt;p&gt;As you can see, we&amp;rsquo;re successfully processing both the &amp;ldquo;version&amp;rdquo; number of mozregression, some characteristics of the machine sending the information (my MacBook in this case), as well as our single measure. We also have a client id, which should tell us roughly how many distinct installations of mozregression are sending pings. This should be more than sufficient for an initial &amp;ldquo;mozregression usage dashboard&amp;rdquo;.&lt;/p&gt;

&lt;h2 id="next-steps"&gt;Next steps&lt;/h2&gt;

&lt;p&gt;There are a bunch of things I still need to work through before landing this inside mozregression itself. Notably, the Glean python bindings are python3-only, so we&amp;rsquo;ll need to &lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1426766"&gt;port the mozregression GUI to python 3&lt;/a&gt; before we can start measuring usage there. But I&amp;rsquo;m excited at how quickly this work is coming together: stay tuned for part 2 in a few weeks.&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">mozregression update: python 3 edition</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2019/09/mozregression-update-python-3-edition/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2019-09-mozregression-update-python-3-edition</id>
  <published>2019-09-16T15:29:04Z</published>
  <updated>2019-09-16T15:29:04Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;For those who are still wondering, yup, I am still maintaining &lt;a href="https://mozilla.github.io/mozregression/"&gt;mozregression&lt;/a&gt;, though increasingly reluctantly. Given how important this project is to the development of Firefox (getting a regression window using mozregression is standard operating procedure whenever a new bug is reported in Firefox), it feels like this project is pretty vital, so I continue out of some sense of obligation &amp;mdash; but really, someone more interested in Mozilla&amp;rsquo;a build, automation and testing systems would be better suited to this task: over the past few years, my interests/focus have shifted away from this area to building up Mozilla&amp;rsquo;s data storage and visualization platform.&lt;/p&gt;

&lt;p&gt;This post will describe some of the things that have happened in the last year and where I see the project going. My hope is to attract some new blood to add some needed features to the project and maybe take on some of the maintainership duties.&lt;/p&gt;

&lt;h2 id="python-3"&gt;python 3&lt;/h2&gt;

&lt;p&gt;The most important update is that, as of today, the command-line version of mozregression (v3.0.1) should work with python 3.5+. &lt;a href="https://python-modernize.readthedocs.io/en/latest/"&gt;modernize&lt;/a&gt; did most of the work for us, though there were some unit tests that needed updating: special thanks to &lt;a href="https://github.com/gloomy-ghost"&gt;@gloomy-ghost&lt;/a&gt; for helping with that.&lt;/p&gt;

&lt;p&gt;For now, we will continue to support python 2.7 in parallel, mainly because the GUI has not yet been ported to python 3 (more on that later) and we have CI to make sure it doesn&amp;rsquo;t break.&lt;/p&gt;

&lt;h2 id="other-updates"&gt;other updates&lt;/h2&gt;

&lt;p&gt;The last year has mostly been one of maintenance. Thanks in particular to Ian Moody (:kwan) for his work throughout the year &amp;mdash; including patches to adapt mozregression support to our new updates policy and shippable builds (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1532412"&gt;bug 1532412&lt;/a&gt;), and Kartikaya Gupta (:kats) for adding support for bisecting the GeckoView example app (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1507225"&gt;bug 1507225&lt;/a&gt;).&lt;/p&gt;

&lt;h2 id="future-work"&gt;future work&lt;/h2&gt;

&lt;p&gt;There are a bunch of things I see us wanting to add or change with mozregression over the next year or so. I might get to some of these if I have some spare cycles, but probably best not to count on it:&lt;/p&gt;

&lt;ul&gt;
 &lt;li&gt;Port the mozregression GUI to Python 3 (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581633"&gt;bug  1581633&lt;/a&gt;) As mentioned  above, the command-line client works with python 3, but we have yet to port  the &lt;a href=""&gt;GUI&lt;/a&gt;. We should do that. This probably also entails porting the GUI to  use PyQT5 (which is pip-installable and thus much easier to integrate into a  CI process), see &lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1426766"&gt;bug 1426766&lt;/a&gt;.&lt;/li&gt;
 &lt;li&gt;Make self-contained GUI builds available for MacOS X (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1425105"&gt;bug  1425105&lt;/a&gt;) and Linux  (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581643"&gt;bug 1581643&lt;/a&gt;).&lt;/li&gt;
 &lt;li&gt;Improve our mechanism for producing a standalone version of the GUI in  general. We&amp;rsquo;ve used &lt;a href="https://github.com/anthony-tuininga/cx_Freeze"&gt;cx_Freeze&lt;/a&gt;  which mostly works ok, but has a number of problems (e.g. it pulls in a bunch of unnecessary dependencies, which  bloats the size of the installer). Upgrading the GUI to use python 3 may  alleviate some of these issues, but it might be worth considering other  options in this space, like Gregory Szorc&amp;rsquo;s &lt;a href="https://github.com/indygreg/PyOxidizer"&gt;pyoxidizer&lt;/a&gt;.&lt;/li&gt;
 &lt;li&gt;Add some kind of telemetry to mozregression to measure usage of this tool  (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1581647"&gt;bug 1581647&lt;/a&gt;).  My anecdotal experience is that this tool is pretty invaluable for Firefox  development and QA, but this is not immediately apparent to Mozilla&amp;rsquo;s  leadership and it&amp;rsquo;s thus very difficult to convince people to spend their  cycles on maintaining and improving this tool. Field data may help change  that story.&lt;/li&gt;
 &lt;li&gt;Supporting new Mozilla products which aren&amp;rsquo;t built (entirely) out of mozilla-central,  most especially Fenix (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1556042"&gt;bug 1556042&lt;/a&gt;)  and Firefox Reality (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1568488"&gt;bug 1568488&lt;/a&gt;).  This is probably rather involved (mozregression has a big pile of assumptions about how  the builds it pulls down are stored and organized) but that doesn&amp;rsquo;t mean that  this work isn&amp;rsquo;t necessary.&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;If you&amp;rsquo;re interested in working on any of the above, please feel free to dive in on one of the above bugs. I can&amp;rsquo;t offer formal mentorship, but am happy to help out where I can.&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">mozregression's new mascot</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2017/07/mozregression-s-new-mascot/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2017-07-mozregression-s-new-mascot</id>
  <published>2017-07-31T15:32:02Z</published>
  <updated>2017-07-31T15:32:02Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;Spent a few hours this morning on a few housekeeping issues with &lt;a href="https://mozilla.github.io/mozregression"&gt;mozregression&lt;/a&gt;. The web site was badly in need of an update (it was full of references to obsolete stuff like B2G and codefirefox.com) and the usual pile of fixes motivated a new release of the actual software. But most importantly, mozregression now has a proper application icon / logo, thanks to Victoria Wang!&lt;/p&gt;

&lt;p&gt;&lt;img src="/files/2017/07/mozregressionicon3.png" /&gt;&lt;/p&gt;

&lt;p&gt;One of the nice parts about working at Mozilla is the flexibility it offers to just hack on stuff that&amp;rsquo;s important, whether or not it&amp;rsquo;s part of your formal job description. Maintaining mozregression is pretty far outside my current set of responsibilities (or even interests), but I keep it going because it&amp;rsquo;s a key tool used by developers team here and no one else seems willing to take it over. Fortunately, tools like appveyor and pypi keep the time suckage to a mostly-reasonable level.&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">mozregression updates</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2015/01/mozregression-updates/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2015-01-mozregression-updates</id>
  <published>2015-01-27T05:00:00Z</published>
  <updated>2015-01-27T05:00:00Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;Lots of movement in &lt;a href="http://mozilla.github.io/mozregression"&gt;mozregression&lt;/a&gt; (a tool for automatically determining when a regression was introduced in Firefox by bisecting builds on ftp.mozilla.org) in the last few months. Here&amp;#8217;s some highlights:&lt;/p&gt;

&lt;ul&gt;
 &lt;li&gt;Support for win64 nightly and inbound builds (Kapil Singh, Vaibhav Agarwal)&lt;/li&gt;
 &lt;li&gt;Support for using an http cache to reduce time spent downloading builds (Sam Garrett)&lt;/li&gt;
 &lt;li&gt;Way better logging and printing of remaining time to finish bisection (Julien Pagès)&lt;/li&gt;
 &lt;li&gt;Much improved performance when bisecting inbound (Julien)&lt;/li&gt;
 &lt;li&gt;Support for automatic determination on whether a build is good/bad via a custom script (Julien)&lt;/li&gt;
 &lt;li&gt;Tons of bug fixes and other robustness improvements (me, Sam, Julien, others&amp;#8230;)&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;Also thanks to Julien, we have a &lt;a href="http://mozilla.github.io/mozregression/"&gt;spiffy new website&lt;/a&gt; which documents many of these features. If it&amp;#8217;s been a while, be sure to &lt;a href="http://mozilla.github.io/mozregression/install.html"&gt;update your copy of mozregression to the latest version&lt;/a&gt; and check out the site for documentation on how to use the new features described above!&lt;/p&gt;

&lt;p&gt;Thanks to everyone involved (especially Julien) for all the hard work. Hopefully the payoff will be a tool that&amp;#8217;s just that much more useful to Firefox contributors everywhere.&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">mozregression 0.24</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2014/09/mozregression-0-24/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2014-09-mozregression-0-24</id>
  <published>2014-09-15T04:00:00Z</published>
  <updated>2014-09-15T04:00:00Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;I just released &lt;a href="http://mozilla.github.io/mozregression/"&gt;mozregression&lt;/a&gt; 0.24. This would be a good time to note some of the user-visible fixes / additions that have gone in recently:&lt;/p&gt;

&lt;ol&gt;
 &lt;li&gt;
  &lt;p&gt;Thanks to Sam Garrett, you can now specify a different branch other than inbound to get finer grained regression ranges from. E.g. if you&amp;#8217;re pretty sure a regression occurred on fx-team, you can do something like:   &lt;code&gt;mozregression --inbound-branch fx-team -g 2014-09-13 -b 2014-09-14&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
 &lt;li&gt;Fixed a bug where we could get an incorrect regression range (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1059856"&gt;bug 1059856&lt;/a&gt;). Unfortunately the root cause of the bug is still open (it&amp;#8217;s a bit tricky to match mozilla-central commits to that of other branches) but I think this most recent fix should make things work in 99.9% of cases. Let me know if I&amp;#8217;m wrong.&lt;/li&gt;
 &lt;li&gt;Thanks to Julien Pagès, we now download the inbound build metadata in parallel, which speeds up inbound bisection quite significantly&lt;/li&gt;&lt;/ol&gt;

&lt;p&gt;If you know a bit of python, contributing to mozregression is a great way to have a high impact on Mozilla. Many platform developers use this project in their day-to-day work, but there&amp;#8217;s still &lt;a href="https://bugzilla.mozilla.org/buglist.cgi?component=mozregression&amp;amp;#038;product=Testing"&gt;lots of room for improvement&lt;/a&gt;.&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">mozregression: New maintainer, issues tracked in bugzilla</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2014/05/mozregression-new-maintainer-issues-tracked-in-bugzilla/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2014-05-mozregression-new-maintainer-issues-tracked-in-bugzilla</id>
  <published>2014-05-08T04:00:00Z</published>
  <updated>2014-05-08T04:00:00Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;Just wanted to give some quick updates on &lt;a href="http://mozilla.github.io/mozregression/"&gt;mozregression&lt;/a&gt;, your favorite regression-finding tool for Firefox:&lt;/p&gt;

&lt;ol&gt;
 &lt;li&gt;I moved all issue tracking in mozregression to bugzilla from github issues. Github unfortunately doesn&amp;#8217;t really scale to handle notifications sensibly when you&amp;#8217;re part of a large organization like Mozilla, which meant many problems were flying past me unseen. &lt;a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Testing&amp;amp;#038;component=mozregression"&gt;File your new bugs&lt;/a&gt; in bugzilla, they&amp;#8217;re now much more likely to be acted upon.&lt;/li&gt;
 &lt;li&gt;&lt;a href="http://blackrhino.io/"&gt;Sam Garrett&lt;/a&gt; has stepped up to be co-maintainer of the project with me. He&amp;#8217;s been doing a great job whacking out a bunch of bugs and keeping things running reliably, and it was time to give him some recognition and power to keep things moving forward.&lt;/li&gt;
 &lt;li&gt;On that note, I just released mozregression 0.17, which now shows the revision number when running a build (a request from the graphics team, bug &lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1007238"&gt;1007238&lt;/a&gt;) and handles respins of nightly builds correctly (&lt;a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1000422"&gt;bug 1000422&lt;/a&gt;). Both of these were fixed by Sam.&lt;/li&gt;&lt;/ol&gt;

&lt;p&gt;If you&amp;#8217;re interested in contributing to Mozilla and are somewhat familiar with python, mozregression is a great place to start. The codebase is quite approachable and the impact will be high &amp;#8212; as I&amp;#8217;ve found out over the last few months, people &lt;em&gt;all over&lt;/em&gt; the Mozilla organization (managers, developers, QA &amp;#8230;) use it in the course of their work and it saves tons of their time. A list of currently open bugs is &lt;a href="https://bugzilla.mozilla.org/buglist.cgi?component=mozregression&amp;amp;#038;product=Testing"&gt;here&lt;/a&gt;.&lt;/p&gt;</content></entry>
 <entry>
  <title type="text">mozregression now supports inbound builds</title>
  <link rel="alternate" href="https://wlach.github.io/blog/2013/11/mozregression-now-supports-inbound-builds/?utm_source=mozregression&amp;utm_medium=Atom" />
  <id>urn:https-wlach-github-io:-blog-2013-11-mozregression-now-supports-inbound-builds</id>
  <published>2013-11-28T05:00:00Z</published>
  <updated>2013-11-28T05:00:00Z</updated>
  <author>
   <name>William Lachance</name></author>
  <content type="html">
&lt;p&gt;Just wanted to send out a quick note that I recently added inbound support to &lt;a href="http://mozilla.github.io/mozregression/"&gt;mozregression&lt;/a&gt; for desktop builds of Firefox on Windows, Mac, and Linux.&lt;/p&gt;

&lt;p&gt;For the uninitiated, mozregression is an automated tool that lets you bisect through builds of Firefox to find out when a problem was introduced. You give it the last known good date, the last known bad date and off it will go, automatically pulling down builds to test. After each iteration, it will ask you whether this build was good or bad, update the regression range accordingly, and then the cycle repeats until there are no more intermediate builds.&lt;/p&gt;

&lt;p&gt;Previously, it would only use nightlies which meant a one day granularity &amp;#8212; this meant pretty wide regression ranges, made wider in the last year by the fact that so much more is now going into the tree over the course of the day. However, with inbound support (using the new inbound archive) we now have the potential to get a much tighter range, which should be super helpful for developers. Best of all, mozregression doesn&amp;#8217;t require any particularly advanced skills to use which means everyone in the Mozilla community can help out.&lt;/p&gt;

&lt;p&gt;For anyone interested, there&amp;#8217;s quite a bit of scope to improve mozregression to make it do more things (FirefoxOS support, easier installation&amp;#8230;). Feel free to check out &lt;a href="http://github.com/mozilla/mozregression"&gt;the repository&lt;/a&gt;, the &lt;a href="https://github.com/mozilla/mozregression/issues?state=open"&gt;issues list&lt;/a&gt; (I just added &lt;a href="https://github.com/mozilla/mozregression/issues/76"&gt;an easy one&lt;/a&gt; which would make a great first bug) and ask questions on irc.mozilla.org#ateam!&lt;/p&gt;</content></entry></feed>