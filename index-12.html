<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8" />
    <title>William Lachance's Log (page 12)</title>
    <meta name="description" content="William Lachance's Log (page 12)" />
    <meta name="author" content="William Lachance" />
    <meta name="keywords" content="Taskcluster, FirefoxOS, Web, Philosophy, Data, Metrics Graphics, Mozilla, all, Profiling, BIXI, iodide, Community, Iodide, Life, telemetry, Video, Meditation, iphone, GoFaster, Bikes, Social Media, Business, Android, Treeherder, GNOME, Environment, ÃŽle Sans Fil, Time, Psychology, Statistics, zen, Music, Counting, Buddhism, Eideticker, Usability, Transit to Go, Infraherder, Ebola, Orangutan, Open Data, Nixi, Meta, ateam, Perfherder, Montreal, Docker, Talos, Telemetry, Responsiveness, Glean, Pandaboard, Food, Toronto, Mission Control, Coffee, hbus, Python, Cats, email, Data Visualization, WifiDog, SQL, Release Engineering, Polling, Performance, Free Software, Transit, mozregression, MSF" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/favicon.ico" />
    <link rel="canonical" href="https://wlach.github.io/index-12.html" />

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="/css/pygments.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="/css/scribble.css"
    />
    <!-- Feeds -->
    <link
      rel="alternate"
      type="application/atom+xml"
      href="/feeds/all.atom.xml"
      title="Atom Feed"
    />
    <link
      rel="alternate"
      type="application/rss+xml"
      href="/feeds/all.rss.xml"
      title="RSS Feed"
    />
    <!-- JS -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-xxxxx', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <nav
      class="flex items-center justify-between flex-wrap bg-gray-800 py-1 px-8"
    >
      <div class="flex items-center flex-shrink-0 text-gray-400 mr-6">
        <div class="p-1">
          <a href="/index.html"
            ><img
              src="/img/wlach_icon.png"
              width="32"
              height="32"
              class="p rounded"
          /></a>
        </div>
        <div class="p-1">
          <a
            href="/index.html"
            class="text-gray-200 font-semibold text-xl tracking-tight hover:text-white"
            >wlach log</a
          >
        </div>
      </div>
      <div class="flex-grow lg:flex lg:items-center">
        <div class="text-sm lg:flex-grow">
          <a
            href="/About.html"
            class="mt-4 lg:inline-block lg:mt-0 hover:text-white mr-4 text-gray-600"
          >
            About</a>
          <a
            class="mt-4 lg:inline-block lg:mt-0 text-gray-600 hover:text-white mr-4"
            href="/feeds/all.atom.xml"
            >Atom</a
          >
          <a
            class="mt-4 lg:inline-block lg:mt-0 text-gray-600 hover:text-white mr-4"
            href="/feeds/all.rss.xml"
            >RSS</a
          >
        </div>
      </div>
    </nav>
    <div id="content" class="container max-w-screen-md px-8 py-4 mx-auto">
         <article>
  <header>
    <h2><a href="/blog/2012/01/yet-more-checkerboarding-analysis/">Yet more checkerboarding analysis</a></h2>
    <p class="index-date">Jan 25th, 2012</p>
    <p><span class="tags"><a href="/tags/Eideticker.html">Eideticker</a>  <a href="/tags/Mozilla.html">Mozilla</a></span></p>
  </header>

<p>I&#8217;ve been spending a bit more time on refining the checkerboarding tests in Eideticker that I talked about last time. Most of my work has been focused on making the results as representative of a real world scenario as possible, to that effect I&#8217;ve been working on:</p>

<ul>
 <li>Changed the test case from a web site of my own concoction to a more realistic example (the <a href="http://taskjs.org">taskjs.org</a> site)</li>
 <li>Use actual Android native events (via <a href="http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html">MonkeyRunner</a>) to synthesize touch-based scrolling instead of simulating the event in JavaScript (which exercises a completely different codepath).</li>
 <li>Fixing various synchronization issues to make results more repeatable. Before captures were of wildly variable lengths, which made the numbers extremely suspect. There&#8217;s probably still a few issues, but much less than before.</li></ul>

<p>The end result of this is a framework that gives much more meaningful results. The bad news is that the results that I&#8217;m measuring don&#8217;t show a very positive picture for where we&#8217;re at with the native re-write of Firefox. Even relative to the version of mobile Firefox which is currently on the Android Market, we still have some catching up to do. Here&#8217;s some video of the &#8220;old&#8221; firefox in action:</p>

<video src="/files/eideticker/taskjs_xul.webm" width="600px" controls="controls"></video>

<p>And here&#8217;s the Native fennec (what we&#8217;re currently offering in nightly, with some minor modifications by me to change the way the &#8220;checkerboard&#8221; is drawn for analysis purposes):</p>

<video src="/files/eideticker/taskjs_native.webm" width="600px" controls="controls"></video>

<p>The numbers behind this comparison:</p>

<table>
 <tr>
  <td>Platform</td> 
  <td>Percent checkerboarding over run of test</td></tr>
 <tr>
  <td>Old Fennec</td> 
  <td>2%</td></tr>
 <tr>
  <td>Native Fennec</td> 
  <td>57%</td></tr></table>

<p>(by the way, this performance regression is filed as <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=719447">bug 719447</a>)</p>

<p>I know there&#8217;s lots of great effort going into improving this situation, so I have hope that we&#8217;ll be doing much better on this metric in the coming days/weeks. The process for creating these videos/analyses is mostly automated at this point, so my plan is to create a small dashboard (ala <a href="http://arewefastyet.com">arewefastyet.com</a>) to measure these numbers over time on the latest nightlies. Stay tuned!</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2012/01/measuring-reduced-checkerboarding-in-mobile-fennec/">Measuring reduced checkerboarding in mobile Fennec</a></h2>
    <p class="index-date">Jan 3rd, 2012</p>
    <p><span class="tags"><a href="/tags/Data-Visualization.html">Data Visualization</a>  <a href="/tags/Eideticker.html">Eideticker</a>  <a href="/tags/Mozilla.html">Mozilla</a></span></p>
  </header>

<p>After my <a href="http://wrla.ch/blog/2011/12/year-end-eideticker-update/">post</a> on measuring checkerboarding in mobile Firefox, <a href="http://cmtalbert.wordpress.com/">Clint Talbert</a> (my fearless manager) suggested I run a before and after test to measure the improvement that just landed as part of <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=709152">bug 709512</a>. After a bit of cleanup, I did so, measuring the delta between my build on December 20th and the latest version of Aurora. The difference is pretty remarkable: at least on the LG G2X that I&#8217;ve been using for testing, we&#8217;ve gone from checkerboarding between 10&ndash;20% of the time and not checkerboarding almost at all (in between two runs of the test with the Aurora build, there is exactly one frame that checkerboards). All credit to <a href="http://chrislord.net/blog">Chris Lord</a> for that!</p>

<p>See the video evidence for yourself. Before:</p>

<video src="/files/eideticker/lotsocheckerboarding.webm" width="600px" controls="controls"></video>

<p>After:</p>

<video src="/files/eideticker/almostnocheckerboarding.webm" width="600px" controls="controls"></video> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/12/year-end-eideticker-update/">Year end Eideticker update</a></h2>
    <p class="index-date">Dec 23rd, 2011</p>
    <p><span class="tags"><a href="/tags/Data-Visualization.html">Data Visualization</a>  <a href="/tags/Mozilla.html">Mozilla</a></span></p>
  </header>

<p>Just before I leave for some Christmas vacation, it&#8217;s time for another update on the state of <a href="http://wrla.ch/blog/2011/11/measuring-what-the-user-sees/">Eideticker</a>. Since I last blogged about the software, I&#8217;ve been working on the following three areas:</p>

<ol>
 <li>Coming up with better algorithm (green screen / red screen) for both determining the area of the capture as well as the start/end of the capture. The harness was already flood filling the area with these colours at the beginning/end of the capture, but now we&#8217;re actually using this information. The code&#8217;s a little hacky, but it seems to work well enough for the test cases I&#8217;ve been using so far.</li>
 <li>As a demonstration, I wrote up a quick test that demonstrates checkerboarding on mobile Fennec, and wrote up a quick bit of analysis code to detect this pattern and give an overall measure of how much this test &#8220;checkerboards&#8221; (i.e. has regions that are not fully painted when the user scrolls). As I understand this is an area that our mobile team is currently working on this problem quite a bit, it will be interesting to watch the numbers given by this test and see if things improve.</li>
 <li>It&#8217;s a minor thing, but you can now view a complete webm movie of the captured movie right from the web interface.</li></ol>

<p>Here&#8217;s a quick demonstration video that shows all the above in action. As before, you might want to watch this full screen:</p>

<video src="/files/eideticker/eideticker-2011-12-21.webm" width="600px" controls="controls"></video>

<p>Happy holidays!</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/12/an-api-for-amt-data/">An API for AMT data</a></h2>
    <p class="index-date">Dec 14th, 2011</p>
    <p><span class="tags"><a href="/tags/Open-Data.html">Open Data</a>  <a href="/tags/Transit.html">Transit</a></span></p>
  </header>

<p>The <a href="http://www.amt.qc.ca">AMT</a> released their <a href="http://t.co/AofpyI4E">GTFS schedule information</a> to the public earlier this week, which is awesome. Not coincidentally, Montreal is going to have a <a href="http://transportationcamp.org/montreal/">Transportation Camp</a> tomorrow, wherein people will hack on transportation software and discuss open data issues.</p>

<p>GTFS information is useful and standard, but in its raw form it can be a bit difficult to wrangle with. So in advance of the event, I thought it might be helpful/useful to put a simple JSON API to the data, based on my <a href="http://github.com/wlach/routez">routez</a> software. Should be useful for creating an app or two! There&#8217;s two endpoints that are currently defined:</p>

<p><code>/api/v1/stop/&lt;stop code&gt;/upcoming_stoptimes</code></p>

<p>This will give a set of upcoming departures at a particular AMT stop (represented by its code). Example:</p>

<p><a href="http://amt.wrla.ch/blog/api/v1/stop/11260/upcoming_stoptimes">http://amt.wrla.ch/blog/api/v1/stop/11260/upcoming_stoptimes</a></p>

<p><code>/api/v1/place/&lt;lat,lng&gt;/upcoming_stoptimes?distance=&lt;distance in meters&gt;</code></p>

<p>This will give a set of AMT stops within range of that endpoint, along with upcoming departures. Example:</p>

<p><a href="http://amt.wrla.ch/blog/api/v1/place/45.49640,%20-73.57567/upcoming_stoptimes?distance=1000">http://amt.wrla.ch/blog/api/v1/place/45.49640,%20-73.57567/upcoming_stoptimes?distance=1000</a></p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/12/eideticker-areas-to-explore/">Eideticker areas to explore</a></h2>
    <p class="index-date">Dec 9th, 2011</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a></span></p>
  </header>

<p>So I got some nice feedback on my <a href="http://wrla.ch/blog/2011/12/eideticker-update/">Eideticker post</a> yesterday on various channels. It seems like some people are interested in hacking on the analysis portion, so I thought I&#8217;d give some quick pointers and suggestions of things to look at.</p>

<ol>
 <li>As I mentioned yesterday, the frame analysis is rather stupid. We need to come up with a better algorithm for disambiguating input noise (small fluctuations in the HDMI signal?) from actual changes in the page. Unfortunately the breadth of things that Eideticker&#8217;s meant to analyze makes this a bit difficult. I.e. edge detection probably wouldn&#8217;t work for something like Microsoft&#8217;s <a href="http://ie.microsoft.com/testdrive/performance/psychedelicbrowsing/Default.html">psychedelic browsing demo</a>. I suspect the best route here is to put some work into better understanding the nature of this &#8220;noise&#8221; and finding a way to filter it out explicitly.</li>
 <li>Our analysis code is still rather slow, and is crying out to be parallelized (either by using multiple cores of the same CPU or a GPU). Burak YiÄŸit Kaya recommended I look into <a href="http://mathema.tician.de/software/pycuda">PyCuda</a> which looks interesting. It looks like there are other possibilities as well though.</li>
 <li>Clipping capture by green screen/red screen. This should be doable by writing some relatively simple code to detect large amounts of green and red and then ignoring previous/current/subsequent frames as appropriate.</li>
 <li>Moar test cases! It was initially suggested to use some of the classic benchmarks, but these only seem to barely work on Fennec (at least with the setup I have). I don&#8217;t know if this is fixable or not, but until it is, we might be better off coming up with more reasonable/realistics measures of visual performance.</li></ol>

<p>You might be able to find other inspiration on the <a href="https://wiki.mozilla.org/Project_Eideticker">Eideticker project page</a> (note that some of this is out of date).</p>

<p>You obviously need the decklink card to perform captures, but the analysis portion of Eideticker can be used/modified on any machine running Linux (Mac should also work, but is untested). To get up and running, just follow the instructions in <a href="https://github.com/mozilla/eideticker/blob/master/README.md">README.md</a>, dump a pregenerated capture into the captures/ directory (here&#8217;s <a href="http://people.mozilla.com/~wlachance/clock.zip">one</a> of a clock), and off you go! The actual analysis code (such as it is) is currently located in <a href="https://github.com/mozilla/eideticker/blob/master/src/videocapture/videocapture/capture.py">src/videocapture/videocapture/capture.py</a> while the web interface is in <a href="https://github.com/mozilla/eideticker/blob/master/src/webapp">https://github.com/mozilla/eideticker/blob/master/src/webapp</a>.</p>

<p>I&#8217;m going to be out later today (Friday), but I&#8217;m mostly around on IRC M-F 9ish&ndash;5ish EST on irc.mozilla.org #ateam as `wlach`. Feel free to pester me with questions!</p>

<p>P.S. I didn&#8217;t really cover infrastructure/automation portions above as I suspect people will find that less interesting (especially without a video capture card to test with), but you can look at my <a href="http://groups.google.com/group/mozilla.tools/browse_thread/thread/a469b7909af589de#">newsgroup post</a> from yesterday if you want to see what I&#8217;ll likely be up to over the next few weeks.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/12/eideticker-update/">Eideticker update</a></h2>
    <p class="index-date">Dec 8th, 2011</p>
    <p><span class="tags"><a href="/tags/Data-Visualization.html">Data Visualization</a>  <a href="/tags/Mozilla.html">Mozilla</a></span></p>
  </header>

<p>Since I last <a href="http://wrla.ch/blog/2011/11/measuring-what-the-user-sees/">blogged</a> about Eideticker, I&#8217;ve made some good progress. Here&#8217;s some highlights:</p>

<ol>
 <li>Eideticker has a new, <a href="https://github.com/mozilla/eideticker/blob/master/bin/runtest.py">much simpler harness</a> and tests are much easier to write. Initially, I was using <a href="https://wiki.mozilla.org/Buildbot/Talos">Talos</a> for this task with the idea that it&#8217;s better not to have duplicate code where it&#8217;s not really required. Seemed like a fine idea in principle, but in practice Talos&#8217;s architecture (which is really oriented around running a large sequence of tests and uploading the results to a central server) was difficult to extend to do what we need to do. At heart, eideticker really only needs to do a few things right now (start up Firefox, start videocapture, load a webpage, stop videocapture) so it&#8217;s best to keep things simple.</li>
 <li>I&#8217;ve reworked the capture analysis API to use <a href="http://numpy.scipy.org">numpy</a> behind the scenes. It&#8217;s still not quite as fast as I would like (doing a framediff analysis on a 30 second animation still takes a minute or so on my fast machine), but we&#8217;re doing an order of magnitude better than before. numpy also seem to have quite the library of routines for doing the types of matrix algebra useful in image analysis, which should be helpful as the project progresses.</li>
 <li>I added the beginnings of a fancy pants web interface for browsing captures and doing visualizations on them! I&#8217;m pretty happy with how this is turning out so far, it&#8217;s already been an incredibly useful tool for debugging Eideticker&#8217;s analysis system and I think it will be equally useful for understanding Firefox&#8217;s behaviour in general.</li></ol>

<p>Here&#8217;s an example analysis session, where I examine a ~60 second capture of the fishtank demo from Microsoft, borrowed from Mark Cote&#8217;s <a href="http://brasstacks.mozilla.com/speedtests/results.html">speedtest</a> library. You might want to view this fullscreen:</p>

<video src="/files/eideticker/eideticker-20111207.webm" width="600px" controls="controls"></video>

<p>A few interesting things to note about this capture:</p>

<ol>
 <li>Our frame comparison algorithm is still comparatively dumb, it just computes the norm of the difference in RGB values between two frames. Since there&#8217;s a (very tiny) amount of noise in the capture, we have to use a threshold to determine whether two frames are the same or not. For all that, the FPS estimate it comes with for the fishtank demo seems about right (and unfortunately at 2 fps, it&#8217;s not particularly good).
  <br /></li>
 <li>I added a green screen / red screen at the start / end of every capture to eliminate race conditions with starting the capture, but haven&#8217;t yet actually taken those frames out of the analysis.
  <br /></li>
 <li>If you look carefully at the animation, not all of the fish that should be displaying in the demo are. I think this has to do with the new native version of Fennec that I&#8217;m using to test (old versions don&#8217;t exhibit this property). I filed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=708633">a bug</a> for this.</li></ol>

<p>What&#8217;s next? Well, as I mentioned last time, the real goal is to create a tool that developers will find useful. To that end, we have plans to set up an Eideticker machine in Mozilla Mountain View office that more people can use (either locally or remotely over the VPN). For this to be workable, I need to figure out how to get the full setup working on &#8220;demand&#8221;. Most of the setup already allows this, with one big exception: the actual Android device that we want to capture video from. The LG G2X that I&#8217;m currently using works fine when I have physical access to it, but as far as I can tell it&#8217;s not possible to get it outputting proper video of an application unless it&#8217;s in an unlocked state (which it obviously isn&#8217;t most of the time).</p>

<p>My current thinking is that a <a href="http://pandaboard.org/">Panda Board</a> running a Vanilla version of Android might be a good candidate for a permanently-connected device. It is capable of HDMI output, doesn&#8217;t have unwanted the bells and whistles of a physical phone (e.g. a lock screen), and should be much reliable due to its physical networking. So far I haven&#8217;t <a href="http://ask.linaro.org/questions/361/hdmi-output-on-android-build">had much luck</a> getting it the video output working with the Decklink capture card, but I&#8217;ve only just started trying. Work will continue.</p>

<p>If I can somehow figure that out, and smooth out some of the rough edges with the web interface and capture API, I think the stage will be set for us all to do some pretty interesting stuff! Looking forward to it.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/11/a-planet-to-call-our-own/">A planet to call our own</a></h2>
    <p class="index-date">Nov 18th, 2011</p>
    <p><span class="tags"><a href="/tags/Mozilla.html">Mozilla</a></span></p>
  </header>

<p>Just a quick note that a planet for Mozilla Tools &#38; Automation (the so-called &#8220;a team&#8221;) is now up, thanks to Reed Loden. With the exception of <a href="http://k0s.org/mozilla/blog">Jeff Hammel</a>, everyone there was already being syndicated on <a href="http://planet.mozilla.org">Planet Mozilla</a>, but this should offer a more focused feed of our doings for those who can&#8217;t always keep up with the firehose. Have a look:</p>

<p><a href="http://planet.mozilla.org/ateam">http://planet.mozilla.org/ateam</a></p>

<p>Who should care? Well, we maintain all the major testing frameworks like Mochitest, Reftest, and Talos as well as automated tooling for QA like <a href="https://developer.mozilla.org/en/Mozmill">Mozmill</a>. Our latest work is focused on making sure that Firefox is as robust, responsive, and performant as possible on desktop and mobile. In short, if you&#8217;re writing or verifying code from mozilla-central, what we&#8217;re doing probably affects you. Please let us know what you think about our projects and whether there&#8217;s anything we can do to make your job easier: we&#8217;re listening.</p>

<p><strong>Quick bonus note</strong>: It&#8217;s not immediately obvious (or at least it wasn&#8217;t to me), but Mozilla has some fairly finely tuned infrastructure for running planets. If your team or group wants one, it&#8217;s definitely better to plug into that instead of rolling your own. ðŸ˜‰ Reed Loden is the maintainer and the source <a href="http://viewvc.svn.mozilla.org/vc/projects/planet/">lives in subversion</a>.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/11/hellofax-rocks-my-world/">Hellofax rocks my world</a></h2>
    <p class="index-date">Nov 18th, 2011</p>
    <p><span class="tags"><a href="/tags/Business.html">Business</a>  <a href="/tags/Usability.html">Usability</a></span></p>
  </header>

<p>It&#8217;s kind of rare for me to pimp out products and services on my blog, but I&#8217;m going to do so just this once.</p>

<p>I really despise faxes, but occasionally I do have to send them in the course of some of the admin work I still do on the side for my old consulting company (address changes, etc.). If you&#8217;re in a similar boat, you really owe it to yourself to check out <a href="http://hellofax.com">hellofax.com</a>. It&#8217;s about three gazillion times better than any other similar service that I&#8217;ve tried (which were all embarassingly bad: I&#8217;d sooner just go to a copy shop) and has saved me hours and hours of time and frustration.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/11/measuring-what-the-user-sees/">Measuring what the user sees</a></h2>
    <p class="index-date">Nov 11th, 2011</p>
    <p><span class="tags"><a href="/tags/Data-Visualization.html">Data Visualization</a>  <a href="/tags/Free-Software.html">Free Software</a>  <a href="/tags/Mozilla.html">Mozilla</a></span></p>
  </header>

<p>I&#8217;ve been spending the last month or so at Mozilla prototyping a new project called <a href="https://wiki.mozilla.org/Project_Eideticker">Eideticker</a> which aims to use video capture data and image/frame analysis for performance measurement of <a href="https://wiki.mozilla.org/Mobile/Fennec/Android">Firefox Mobile</a>. It&#8217;s still in quite a rough state, but it&#8217;s now complete enough that I thought it would be worth spending a bit of time describing both its motivation and how it works.</p>

<p>First, a bit of an introduction. Up to now, our automated performance tools have used entirely synthetic benchmarks (how long til we get the onload event? how many ms since we last hit the main loop?) to gather performance information. As we&#8217;ve found out, there&#8217;s a lot you can measure with synthetic benchmarks. Tools like <a href="https://wiki.mozilla.org/Buildbot/Talos">Talos</a> have proven themselves by catching performance regressions on a very regular basis.</p>

<p>Still, there&#8217;s many things that synthetic benchmarks can&#8217;t easily or reliably measure. For example, it&#8217;s nice to know that a page has triggered an &#8220;onload&#8221; event (and the sooner it does that, the better), but what does the browser look like before then? If it&#8217;s a complicated or image intensive page, it might take 10 or 15 seconds to load. In this interval, user studies have clearly shown that an application displaying <em>something</em> sooner rather than later is always desirable if it&#8217;s not possible to display everything immediately (due to network traffic, CPU constraints, whatever). It&#8217;s this area of user-perceived performance that Eideticker aims to help with. Eideticker creates a system to capture live data of what the browser is displaying, then performs image/frame analysis on the result to see how we&#8217;re actually doing on these inherently subjective metrics. The above was just one example, others might include:</p>

<ul>
 <li>Measuring amount of time it takes to actually see the start page from time of launch.</li>
 <li>Measuring amount of time you see the checkboard pattern after panning the browser.</li>
 <li>Measuring the visual artifacts while loading a complicated page (how long does it take to display something? how long until we get something close to the final expected result? how long until we get the actual final result?)</li></ul>

<p>It turns out that it&#8217;s possible to put together a system that does this type of analysis using off-the-shelf components. We&#8217;re still very much in the early phase, but initial signs are promising. The initial test system has the following pieces:</p>

<ol>
 <li>A Linux workstation equipped with a Decklink extreme 3D video capture card</li>
 <li>An Android phone with HDMI output (currently using the LG G2X)</li>
 <li>A version of talos modified to video capture the results of a test.</li>
 <li>A bit of python code to actually analyze the video capture data.</li></ol>

<p>So far, I&#8217;ve got the system working end-to-end for two simple cases. The first is the &#8220;pageload&#8221; case. This lets you capture the results of loading any page within a talos pageset. Here&#8217;s a quick example of the movie we generate from a tsvg test:</p>

<video src="http://people.mozilla.com/~wlachance/eideticker-map.webm" width="50%" height="50%" controls="controls"></video>

<p>Here&#8217;s another example, a color cycle test (actually the first test case I created, as a throwaway):</p>

<video src="http://people.mozilla.com/~wlachance/eideticker-colorcycle.webm" width="50%" height="50%" controls="controls"></video>

<p>After the video is captured, the next step is to analyze it! As described above (and in further detail on the <a href="https://wiki.mozilla.org/Project_Eideticker">Eideticker wiki page</a>), there&#8217;s lots of things we could measure but the easiest thing is probably just to count the number of unique frames and derive a frame rate for the capture based on that (the higher the better, obviously). Based on an initial prototype from Chris Jones, I&#8217;ve started work on a <a href="https://github.com/mozilla/eideticker/blob/master/src/videocapture/videocapture/capture.py">python library</a> to do exactly this. Assuming you have an eideticker capture handy, you can run a tool called &#8220;analyze.py&#8221; on the command line, and it&#8217;ll give you its best guess of the # of unique frames:</p>

<p><code>&lt;br /&gt;
(eideticker)wlach@eideticker:~/src/eideticker$ bin/analyze.py  ./src/talos/talos/captures/capture-2011-11-11T11:23:51.627183.zip&lt;br /&gt;
Unique frames: 121/272&lt;br /&gt;</code></p>

<p>(There are currently some rough edges with this: we&#8217;re doing frame comparisons based on per-pixel changes, but the video capture data is slightly noisy so sometimes a pixel changes its value even when nothing has actually happened in the browser)</p>

<p>So that&#8217;s what I&#8217;ve got working so far. What&#8217;s next? Short term, we have some <a href="https://wiki.mozilla.org/Auto-tools/Goals/2011Q4#Eideticker">specific high-level goals</a> about where we want to be with the system by the end of the quarter. The big unfinished pieces are getting an end-to-end test involving real user interaction (typing into the URL bar, etc.) going and turning this prototype system into something that&#8217;s easy for others to duplicate and is robust enough to be easily extended. Hopefully this will come together fairly quickly now that the basics are in place.</p>

<p>The longer term picture really depends on feedback from the community. Unlike many of the projects we work on in <a href="https://wiki.mozilla.org/Auto-tools">automation &#38; tools</a>, Eideticker is <strong>not</strong> meant to be something that&#8217;s run on every checkin. Rather, it&#8217;s intended to be a useful tool that can be run on an as needed basis by developers and QA. We obviously have our own ideas on how something like this might be useful (and what a reasonable user interface might be), but I&#8217;ve found in cases like this it&#8217;s much better to go to the people who will actually be using this thing. So with that in mind, here&#8217;s a call for feedback. I have two very specific questions:</p>

<ul>
 <li>Is there a specific problem you&#8217;ve been working on that a framework like this might be helpful for?</li>
 <li>What do you think of the current workflow model described in the <a href="http://github.com/mozilla/eideticker/README.md">README</a>?</li></ul>

<p>My goal is to make something that people will love, so please do let me know what you think. Nothing about this project is cast in stone and the last thing I want is to deliver a product that people don&#8217;t actually want to use.</p>

<p>Equally, while Eideticker is being written primarily with the goal of making Mobile Firefox better (and in the slightly-less short term, desktop Firefox and <a href="https://github.com/andreasgal/B2G">Boot to Gecko</a>), much of it is broadly applicable to any user-facing mobile or desktop application. If you think some component of Eideticker might be interesting to your project and want to collaborate, feel free to get in touch.</p> 
  <hr/>
</article>
<article>
  <header>
    <h2><a href="/blog/2011/11/weirdest-and-saddest-unsolicited-email-ever/">Weirdest (and saddest) unsolicited email ever</a></h2>
    <p class="index-date">Nov 1st, 2011</p>
    <p><span class="tags"><a href="/tags/Life.html">Life</a></span></p>
  </header>

<p>Got this exceedingly strange e-mail yesterday. It&#8217;s almost a bit tragic. Anyone else seen gotten this?</p>

<p>(BTW, the writing samples, which I won&#8217;t link to, weren&#8217;t half bad)</p>

<blockquote>
 <p>Hi there,</p>
 <p>Hope keeping well. I&#8217;m just getting in touch to ask if you&#8217;re open to reviewing content from freelance writers at Ginger Tea and Channa Masala &#8211; if so, I&#8217;d love to put together a high-quality article written specifically for the site. I&#8217;m 29 and have been working as a professional writer and researcher for five years now, and in that time there isn&#8217;t a lot I haven&#8217;t already covered (I&#8217;ve attached a few samples below for you to check out).</p>
 <p>As long as you&#8217;re happy with the resulting material, you&#8217;d be welcome to publish it as you see fit and the content will be owned by you entirely (in that I won&#8217;t send it to anyone else, either before or after publication).</p>
 <p>There is absolutely no charge for this and no strings attached; the only thing I would ask in return is that I&#8217;m able to include a link to a site of my choosing within the article &#8211; nothing shady or unethical, just one of the professional businesses I freelance for.</p>
 <p>Do let me know if you&#8217;re interested, and if so I can get something written for you over the course of the next few days. Needless to say, the offer is open to any other sites you might own as well as wrla.ch/blog. I appreciate you may not be interested in this kind of mutual back-scratching however, so if I don&#8217;t hear from you, no offence taken and I won&#8217;t trouble you again.</p>
 <p>Very best,
  <br />XXXXXX</p></blockquote> 
  <hr/>
</article>
<footer>
 <ul class="pagination">
  <li class="page-item"><a class="page-link" href="/index-11.html">
    <quote>&larr;</quote></a></li>
  <li class="page-item"><a class="page-link" href="/index.html">1</a></li>
  <li class="page-item"><a class="page-link" href="/index-2.html">2</a></li>
  <li class="page-item"><a class="page-link" href="/index-3.html">3</a></li>
  <li class="page-item"><a class="page-link" href="/index-4.html">4</a></li>
  <li class="page-item"><a class="page-link" href="/index-5.html">5</a></li>
  <li class="page-item"><a class="page-link" href="/index-6.html">6</a></li>
  <li class="page-item"><a class="page-link" href="/index-7.html">7</a></li>
  <li class="page-item"><a class="page-link" href="/index-8.html">8</a></li>
  <li class="page-item"><a class="page-link" href="/index-9.html">9</a></li>
  <li class="page-item"><a class="page-link" href="/index-10.html">10</a></li>
  <li class="page-item"><a class="page-link" href="/index-11.html">11</a></li>
  <li class="page-item active"><a class="page-link" href="/index-12.html">12</a></li>
  <li class="page-item"><a class="page-link" href="/index-13.html">13</a></li>
  <li class="page-item"><a class="page-link" href="/index-14.html">14</a></li>
  <li class="page-item"><a class="page-link" href="/index-15.html">15</a></li>
  <li class="page-item"><a class="page-link" href="/index-13.html">
    <quote>&rarr;</quote></a></li></ul></footer>
    </div>
    <footer class="container max-w-screen-md px-8 py-4 mx-auto less-important">
      <p>Comments / thoughts? Feel free to send an email to wlach on protonmail.com or
        (for Mozilla-related stuff) reach me at <code>wlach</code> on <a href="https://wiki.mozilla.org/Matrix">Mozilla's instance of Matrix</a>.</p>
      <p>
        Site generated by
        <a href="https://github.com/greghendershott/frog">Frog</a>.
        Post content is licensed under a
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"
          >Creative Commons Attribution 4.0 Unported License</a
        >.
      </p>
    </footer>
  </body>
</html>